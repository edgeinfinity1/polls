{"version":3,"file":"forum.js","mappings":"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UA,CAACphB,IAAU,EAAQ;IAC3BnD,CAAC,CAACqG,KAAK,CAACpH,GAAG,CAAC0D,6DAAS,CAAC,mBAAmB,EAAE;MAAEoF,EAAE,EAAE5E,IAAI,CAAC4E,EAAE,CAAC;IAAE,CAAC,CAAC,CAAC;EAChE;AACF,CAAC,E;;;;;;;;;;;;;;;;ACtHyC;AAEnC,IAAM8c,KAAK,GAAG;EACnBlU,YAAY,EAAZA,qDAAYA;AACd,CAAC,C;;;;;;;;;;;ACJD,wD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,oE;;;;;;;;;;;ACAA,0E;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,qE;;;;;;;;;;;ACAA,wE;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,wE;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,oE;;;;;;;;;;;ACAA,qE;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,oE;;;;;;;;;;;ACAA,2E;;;;;;;;;;;ACAA,uE;;;;;;;;;;;ACAA,uE;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,sE;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,4D;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E","sources":["webpack://@fof/polls/./node_modules/@babel/runtime/helpers/OverloadYield.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/readOnlyError.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regenerator.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorAsync.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorAsyncGen.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorAsyncIterator.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorDefine.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorKeys.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/regeneratorValues.js","webpack://@fof/polls/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@fof/polls/./node_modules/@babel/runtime/regenerator/index.js","webpack://@fof/polls/./src/forum/addComposerItems.tsx","webpack://@fof/polls/./src/forum/addDiscussionBadge.tsx","webpack://@fof/polls/./src/forum/addNavItem.ts","webpack://@fof/polls/./src/forum/addPollsToPost.tsx","webpack://@fof/polls/./src/forum/addPostControls.tsx","webpack://@fof/polls/./src/forum/components/AbstractPollPage.tsx","webpack://@fof/polls/./src/forum/components/ComposePollHero.tsx","webpack://@fof/polls/./src/forum/components/ComposePollPage.tsx","webpack://@fof/polls/./src/forum/components/CreatePollModal.tsx","webpack://@fof/polls/./src/forum/components/EditPollModal.tsx","webpack://@fof/polls/./src/forum/components/ListVotersModal.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollImage.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollList.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollListItem.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOption.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollOptions.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollSubmitButton.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollSubtitle.tsx","webpack://@fof/polls/./src/forum/components/Poll/PollTitle.tsx","webpack://@fof/polls/./src/forum/components/PollForm.tsx","webpack://@fof/polls/./src/forum/components/PollPageHero.tsx","webpack://@fof/polls/./src/forum/components/PollShowcase.tsx","webpack://@fof/polls/./src/forum/components/PollShowcaseItem.tsx","webpack://@fof/polls/./src/forum/components/PollView.tsx","webpack://@fof/polls/./src/forum/components/PollViewPage.tsx","webpack://@fof/polls/./src/forum/components/PollsPage.tsx","webpack://@fof/polls/./src/forum/components/PollsShowcasePage.tsx","webpack://@fof/polls/./src/forum/components/PostPoll.tsx","webpack://@fof/polls/./src/forum/components/UploadPollImageButton.tsx","webpack://@fof/polls/./src/forum/components/form/FormError.tsx","webpack://@fof/polls/./src/forum/components/index.ts","webpack://@fof/polls/./src/forum/extend.ts","webpack://@fof/polls/./src/forum/index.ts","webpack://@fof/polls/./src/forum/models/Poll.ts","webpack://@fof/polls/./src/forum/models/PollOption.ts","webpack://@fof/polls/./src/forum/models/PollVote.ts","webpack://@fof/polls/./src/forum/models/index.ts","webpack://@fof/polls/./src/forum/states/PollFormState.ts","webpack://@fof/polls/./src/forum/states/PollListState.ts","webpack://@fof/polls/./src/forum/states/PollState.ts","webpack://@fof/polls/./src/forum/states/index.ts","webpack://@fof/polls/./src/forum/utils/PollControls.tsx","webpack://@fof/polls/./src/forum/utils/index.ts","webpack://@fof/polls/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Placeholder']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Forum']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/models/Post']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/states/PaginatedListState']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/EventEmitter']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/RequestError']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/SubtreeRetainer']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/abbreviateNumber']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/polls/external root \"flarum.core.compat['common/utils/string']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/components/ReplyComposer']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@fof/polls/external root \"flarum.core.compat['forum/utils/slidable']\"","webpack://@fof/polls/webpack/bootstrap","webpack://@fof/polls/webpack/runtime/compat get default export","webpack://@fof/polls/webpack/runtime/define property getters","webpack://@fof/polls/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/polls/webpack/runtime/make namespace object"],"sourcesContent":["function _OverloadYield(e, d) {\n  this.v = e, this.k = d;\n}\nmodule.exports = _OverloadYield, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","import isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}\nexport { _construct as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _isNativeFunction(t) {\n  try {\n    return -1 !== Function.toString.call(t).indexOf(\"[native code]\");\n  } catch (n) {\n    return \"function\" == typeof t;\n  }\n}\nexport { _isNativeFunction as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","function _readOnlyError(r) {\n  throw new TypeError('\"' + r + '\" is read-only');\n}\nexport { _readOnlyError as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nfunction _wrapNativeSuper(t) {\n  var r = \"function\" == typeof Map ? new Map() : void 0;\n  return _wrapNativeSuper = function _wrapNativeSuper(t) {\n    if (null === t || !isNativeFunction(t)) return t;\n    if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\");\n    if (void 0 !== r) {\n      if (r.has(t)) return r.get(t);\n      r.set(t, Wrapper);\n    }\n    function Wrapper() {\n      return construct(t, arguments, getPrototypeOf(this).constructor);\n    }\n    return Wrapper.prototype = Object.create(t.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), setPrototypeOf(Wrapper, t);\n  }, _wrapNativeSuper(t);\n}\nexport { _wrapNativeSuper as default };","var regeneratorDefine = require(\"./regeneratorDefine.js\");\nfunction _regenerator() {\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */\n  var e,\n    t,\n    r = \"function\" == typeof Symbol ? Symbol : {},\n    n = r.iterator || \"@@iterator\",\n    o = r.toStringTag || \"@@toStringTag\";\n  function i(r, n, o, i) {\n    var c = n && n.prototype instanceof Generator ? n : Generator,\n      u = Object.create(c.prototype);\n    return regeneratorDefine(u, \"_invoke\", function (r, n, o) {\n      var i,\n        c,\n        u,\n        f = 0,\n        p = o || [],\n        y = !1,\n        G = {\n          p: 0,\n          n: 0,\n          v: e,\n          a: d,\n          f: d.bind(e, 4),\n          d: function d(t, r) {\n            return i = t, c = 0, u = e, G.n = r, a;\n          }\n        };\n      function d(r, n) {\n        for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) {\n          var o,\n            i = p[t],\n            d = G.p,\n            l = i[2];\n          r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0));\n        }\n        if (o || r > 1) return a;\n        throw y = !0, n;\n      }\n      return function (o, p, l) {\n        if (f > 1) throw TypeError(\"Generator is already running\");\n        for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) {\n          i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u);\n          try {\n            if (f = 2, i) {\n              if (c || (o = \"next\"), t = i[o]) {\n                if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\");\n                if (!t.done) return t;\n                u = t.value, c < 2 && (c = 0);\n              } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1);\n              i = e;\n            } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break;\n          } catch (t) {\n            i = e, c = 1, u = t;\n          } finally {\n            f = 1;\n          }\n        }\n        return {\n          value: t,\n          done: y\n        };\n      };\n    }(r, o, i), !0), u;\n  }\n  var a = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  t = Object.getPrototypeOf;\n  var c = [][n] ? t(t([][n]())) : (regeneratorDefine(t = {}, n, function () {\n      return this;\n    }), t),\n    u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c);\n  function f(e) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, regeneratorDefine(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e;\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, regeneratorDefine(u, \"constructor\", GeneratorFunctionPrototype), regeneratorDefine(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", regeneratorDefine(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), regeneratorDefine(u), regeneratorDefine(u, o, \"Generator\"), regeneratorDefine(u, n, function () {\n    return this;\n  }), regeneratorDefine(u, \"toString\", function () {\n    return \"[object Generator]\";\n  }), (module.exports = _regenerator = function _regenerator() {\n    return {\n      w: i,\n      m: f\n    };\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports)();\n}\nmodule.exports = _regenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var regeneratorAsyncGen = require(\"./regeneratorAsyncGen.js\");\nfunction _regeneratorAsync(n, e, r, t, o) {\n  var a = regeneratorAsyncGen(n, e, r, t, o);\n  return a.next().then(function (n) {\n    return n.done ? n.value : a.next();\n  });\n}\nmodule.exports = _regeneratorAsync, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var regenerator = require(\"./regenerator.js\");\nvar regeneratorAsyncIterator = require(\"./regeneratorAsyncIterator.js\");\nfunction _regeneratorAsyncGen(r, e, t, o, n) {\n  return new regeneratorAsyncIterator(regenerator().w(r, e, t, o), n || Promise);\n}\nmodule.exports = _regeneratorAsyncGen, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var OverloadYield = require(\"./OverloadYield.js\");\nvar regeneratorDefine = require(\"./regeneratorDefine.js\");\nfunction AsyncIterator(t, e) {\n  function n(r, o, i, f) {\n    try {\n      var c = t[r](o),\n        u = c.value;\n      return u instanceof OverloadYield ? e.resolve(u.v).then(function (t) {\n        n(\"next\", t, i, f);\n      }, function (t) {\n        n(\"throw\", t, i, f);\n      }) : e.resolve(u).then(function (t) {\n        c.value = t, i(c);\n      }, function (t) {\n        return n(\"throw\", t, i, f);\n      });\n    } catch (t) {\n      f(t);\n    }\n  }\n  var r;\n  this.next || (regeneratorDefine(AsyncIterator.prototype), regeneratorDefine(AsyncIterator.prototype, \"function\" == typeof Symbol && Symbol.asyncIterator || \"@asyncIterator\", function () {\n    return this;\n  })), regeneratorDefine(this, \"_invoke\", function (t, o, i) {\n    function f() {\n      return new e(function (e, r) {\n        n(t, i, e, r);\n      });\n    }\n    return r = r ? r.then(f, f) : f();\n  }, !0);\n}\nmodule.exports = AsyncIterator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _regeneratorDefine(e, r, n, t) {\n  var i = Object.defineProperty;\n  try {\n    i({}, \"\", {});\n  } catch (e) {\n    i = 0;\n  }\n  module.exports = _regeneratorDefine = function regeneratorDefine(e, r, n, t) {\n    if (r) i ? i(e, r, {\n      value: n,\n      enumerable: !t,\n      configurable: !t,\n      writable: !t\n    }) : e[r] = n;else {\n      var o = function o(r, n) {\n        _regeneratorDefine(e, r, function (e) {\n          return this._invoke(r, n, e);\n        });\n      };\n      o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2);\n    }\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _regeneratorDefine(e, r, n, t);\n}\nmodule.exports = _regeneratorDefine, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _regeneratorKeys(e) {\n  var n = Object(e),\n    r = [];\n  for (var t in n) r.unshift(t);\n  return function e() {\n    for (; r.length;) if ((t = r.pop()) in n) return e.value = t, e.done = !1, e;\n    return e.done = !0, e;\n  };\n}\nmodule.exports = _regeneratorKeys, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var OverloadYield = require(\"./OverloadYield.js\");\nvar regenerator = require(\"./regenerator.js\");\nvar regeneratorAsync = require(\"./regeneratorAsync.js\");\nvar regeneratorAsyncGen = require(\"./regeneratorAsyncGen.js\");\nvar regeneratorAsyncIterator = require(\"./regeneratorAsyncIterator.js\");\nvar regeneratorKeys = require(\"./regeneratorKeys.js\");\nvar regeneratorValues = require(\"./regeneratorValues.js\");\nfunction _regeneratorRuntime() {\n  \"use strict\";\n\n  var r = regenerator(),\n    e = r.m(_regeneratorRuntime),\n    t = (Object.getPrototypeOf ? Object.getPrototypeOf(e) : e.__proto__).constructor;\n  function n(r) {\n    var e = \"function\" == typeof r && r.constructor;\n    return !!e && (e === t || \"GeneratorFunction\" === (e.displayName || e.name));\n  }\n  var o = {\n    \"throw\": 1,\n    \"return\": 2,\n    \"break\": 3,\n    \"continue\": 3\n  };\n  function a(r) {\n    var e, t;\n    return function (n) {\n      e || (e = {\n        stop: function stop() {\n          return t(n.a, 2);\n        },\n        \"catch\": function _catch() {\n          return n.v;\n        },\n        abrupt: function abrupt(r, e) {\n          return t(n.a, o[r], e);\n        },\n        delegateYield: function delegateYield(r, o, a) {\n          return e.resultName = o, t(n.d, regeneratorValues(r), a);\n        },\n        finish: function finish(r) {\n          return t(n.f, r);\n        }\n      }, t = function t(r, _t, o) {\n        n.p = e.prev, n.n = e.next;\n        try {\n          return r(_t, o);\n        } finally {\n          e.next = n.n;\n        }\n      }), e.resultName && (e[e.resultName] = n.v, e.resultName = void 0), e.sent = n.v, e.next = n.n;\n      try {\n        return r.call(this, e);\n      } finally {\n        n.p = e.prev, n.n = e.next;\n      }\n    };\n  }\n  return (module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return {\n      wrap: function wrap(e, t, n, o) {\n        return r.w(a(e), t, n, o && o.reverse());\n      },\n      isGeneratorFunction: n,\n      mark: r.m,\n      awrap: function awrap(r, e) {\n        return new OverloadYield(r, e);\n      },\n      AsyncIterator: regeneratorAsyncIterator,\n      async: function async(r, e, t, o, u) {\n        return (n(e) ? regeneratorAsyncGen : regeneratorAsync)(a(r), e, t, o, u);\n      },\n      keys: regeneratorKeys,\n      values: regeneratorValues\n    };\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports)();\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorValues(e) {\n  if (null != e) {\n    var t = e[\"function\" == typeof Symbol && Symbol.iterator || \"@@iterator\"],\n      r = 0;\n    if (t) return t.call(e);\n    if (\"function\" == typeof e.next) return e;\n    if (!isNaN(e.length)) return {\n      next: function next() {\n        return e && r >= e.length && (e = void 0), {\n          value: e && e[r++],\n          done: !e\n        };\n      }\n    };\n  }\n  throw new TypeError(_typeof(e) + \" is not iterable\");\n}\nmodule.exports = _regeneratorValues, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport classList from 'flarum/common/utils/classList';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\nimport CreatePollModal from './components/CreatePollModal';\nimport Poll from './models/Poll';\nimport PollOption from './models/PollOption';\nimport { ModelAttributes } from 'flarum/common/Model';\nimport PollModelAttributes from './models/PollModelAttributes';\n\nfunction toPoll(data: PollModelAttributes) {\n  if (data) {\n    const poll = app.store.createRecord<Poll>('polls');\n\n    poll.tempOptions = data.options.map((option: ModelAttributes) => {\n      const pollOption = app.store.createRecord<PollOption>('poll_options');\n      pollOption.pushAttributes(option);\n      return pollOption;\n    });\n    poll.pushAttributes(data);\n\n    return poll;\n  }\n  return data;\n}\n\nexport const addToComposer = (composer: ComponentClass) => {\n  // @ts-ignore\n  composer.prototype.addPoll = function () {\n    app.modal.show(CreatePollModal, {\n      poll: toPoll(this.composer.fields.poll),\n      onsubmit: (poll: PollModelAttributes) => (this.composer.fields.poll = poll),\n    });\n  };\n\n  // Add button to DiscussionComposer header\n  extend(composer.prototype, 'headerItems', function (items) {\n    const discussion = this.composer.body?.attrs?.discussion;\n\n    // @ts-ignore\n    console.log(discussion);\n    const canStartPoll = (discussion?.canStartPoll() || discussion?.canRename()) ?? app.forum.canStartPolls();\n\n    if (canStartPoll) {\n      items.add(\n        'polls',\n        <a className=\"ComposerBody-poll\" onclick={this.addPoll.bind(this)}>\n          <span className={classList('PollLabel', !this.composer.fields.poll && 'none')}>\n            {app.translator.trans(`fof-polls.forum.composer_discussion.${this.composer.fields.poll ? 'edit' : 'add'}_poll`)}\n          </span>\n        </a>,\n        1\n      );\n    }\n  });\n\n  extend(composer.prototype, 'data', function (data) {\n    if (this.composer.fields.poll) {\n      data.poll = this.composer.fields.poll;\n    }\n  });\n};\n\nexport default () => {\n  addToComposer(DiscussionComposer);\n  addToComposer(ReplyComposer);\n};\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport Badge from 'flarum/common/components/Badge';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport Discussion from 'flarum/common/models/Discussion';\nimport { PaginatedListRequestParams } from 'flarum/common/states/PaginatedListState';\n\nexport default () => {\n  // @ts-ignore\n  extend(DiscussionList.prototype, 'requestParams', (params: PaginatedListRequestParams) => {\n    (params.include as string[]).push('poll');\n  });\n\n  extend(Discussion.prototype, 'badges', function (badges) {\n    // @ts-ignore\n    if (this.hasPoll()) {\n      badges.add(\n        'poll',\n        Badge.component({\n          type: 'poll',\n          label: app.translator.trans('fof-polls.forum.tooltip.badge'),\n          icon: 'fas fa-poll',\n        }),\n        5\n      );\n    }\n  });\n};\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nexport default function addNavItem() {\n  extend(IndexPage.prototype, 'navItems', (items) => {\n    if (!app.forum.attribute<boolean>('globalPollsEnabled')) {\n      return;\n    }\n\n    items.add(\n      'fof-polls-showcase',\n      LinkButton.component(\n        {\n          href: app.route('fof.polls.showcase'),\n          icon: 'fas fa-poll',\n        },\n        app.translator.trans('fof-polls.forum.page.nav')\n      ),\n      35\n    );\n\n    const showAllGlobalPolls = app.forum.attribute<boolean>('canStartGlobalPolls');\n\n    if (showAllGlobalPolls) {\n      items.add(\n        'fof-polls-list',\n        LinkButton.component(\n          {\n            href: app.route('fof.polls.list'),\n            icon: 'fas fa-list',\n          },\n          app.translator.trans('fof-polls.forum.page.nav-all')\n        ),\n        32\n      );\n    }\n  });\n}\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport PollView from './components/PollView';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport Poll from './models/Poll';\nimport PollOption from './models/PollOption';\nimport PostPoll from './components/PostPoll';\n\ninterface PusherPollDto {\n  pollId: string;\n  pollVoteCount: number;\n  options: { [key: string]: number };\n}\n\nexport default () => {\n  extend(CommentPost.prototype, 'content', function (content) {\n    const post = this.attrs.post;\n\n    if ((!post.isHidden() || this.revealContent) && post.polls()) {\n      for (const poll of post.polls()) {\n        if (poll) {\n          content.push(<PostPoll post={post} poll={poll} />);\n        }\n      }\n    }\n  });\n\n  extend(CommentPost.prototype, 'oninit', function () {\n    this.subtree.check(() => {\n      const polls = this.attrs.post.polls();\n\n      const checks = polls?.map?.(\n        (poll) =>\n          poll && [\n            poll.data?.attributes,\n            poll.options().map?.((option) => option?.data?.attributes),\n            poll.myVotes().map?.((vote) => vote.option()?.id()),\n          ]\n      );\n\n      return JSON.stringify(checks);\n    });\n  });\n\n  extend(DiscussionPage.prototype, 'oncreate', function () {\n    // @ts-ignore\n    if (app.pusher) {\n      // @ts-ignore\n      app.pusher.then((binding) => {\n        // We will listen for updates to all polls and options\n        // Even if that model is not in the current discussion, it doesn't really matter\n        binding.channels.main.bind('updatedPollOptions', (data: PusherPollDto) => {\n          const poll = app.store.getById<Poll>('polls', data['pollId']);\n\n          if (poll) {\n            poll.pushAttributes({\n              voteCount: data['pollVoteCount'],\n            });\n\n            // Not redrawing here, as the option below should trigger the redraw already\n          }\n\n          const changedOptions = data['options'];\n\n          for (const optionId in changedOptions) {\n            const option = app.store.getById<PollOption>('poll_options', optionId);\n\n            if (option && option.voteCount() !== undefined) {\n              option.pushAttributes({\n                voteCount: changedOptions[optionId],\n              });\n            }\n          }\n\n          m.redraw();\n        });\n      });\n    }\n  });\n\n  extend(DiscussionPage.prototype, 'onremove', function () {\n    // @ts-ignore\n    if (app.pusher) {\n      // @ts-ignore\n      app.pusher.then((binding) => {\n        binding.channels.main.unbind('updatedPollOptions');\n      });\n    }\n  });\n};\n","import app from 'flarum/forum/app';\n\nimport { extend } from 'flarum/common/extend';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport CreatePollModal from './components/CreatePollModal';\nimport Button from 'flarum/common/components/Button';\nimport Post from 'flarum/common/models/Post';\nimport PollModelAttributes from './models/PollModelAttributes';\n\nexport default () => {\n  const createPoll = (post: Post) =>\n    app.modal.show(CreatePollModal, {\n      onsubmit: (data: PollModelAttributes) =>\n        app.store\n          .createRecord('polls')\n          .save(\n            {\n              ...data,\n              relationships: {\n                post,\n              },\n            },\n            {\n              data: {\n                include: 'options,myVotes,myVotes.option',\n              },\n            }\n          )\n          .then((poll) => {\n            // @ts-ignore\n            post.rawRelationship('polls')?.push?.({ type: 'polls', id: poll.id() });\n\n            return poll;\n          }),\n    });\n\n  extend(PostControls, 'moderationControls', function (items, post) {\n    // @ts-ignore\n    if (!post.isHidden() && post.canStartPoll()) {\n      items.add(\n        'addPoll',\n        <Button icon=\"fas fa-poll\" onclick={createPoll.bind(this, post)}>\n          {app.translator.trans('fof-polls.forum.moderation.add')}\n        </Button>\n      );\n    }\n  });\n};\n","import Page, { IPageAttrs } from 'flarum/common/components/Page';\nimport PollListState from '../states/PollListState';\nimport Poll from '../models/Poll';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport listItems from 'flarum/common/helpers/listItems';\nimport app from 'flarum/forum/app';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport IndexPageHero from './PollPageHero';\n\nexport abstract class AbstractPollPage extends Page<IPageAttrs, PollListState> {\n  loading: boolean = false;\n  poll: Poll | null | undefined = null;\n  polls: Poll[] = [];\n\n  view(): Mithril.Children {\n    return <div className=\"PollsPage\">{this.pageContent().toArray()}</div>;\n  }\n\n  pageContent(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('hero', this.hero(), 100);\n    items.add('main', <div className=\"container\">{this.mainContent().toArray()}</div>, 10);\n\n    return items;\n  }\n\n  mainContent(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('sidebar', this.sidebar(), 100);\n    items.add('content', this.content(), 10);\n\n    return items;\n  }\n\n  content(): Mithril.Children {\n    return <div className=\"PollsPage-content sideNavOffset\">{this.contentItems().toArray()}</div>;\n  }\n\n  contentItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (this.loading) {\n      items.add('loading', <LoadingIndicator />);\n    }\n\n    return items;\n  }\n\n  hero(): Mithril.Children {\n    return <IndexPageHero />;\n  }\n\n  sidebar(): Mithril.Children {\n    return (\n      <nav className=\"PollsPage-nav IndexPage-nav sideNav\">\n        <ul>{listItems(this.sidebarItems().toArray())}</ul>\n      </nav>\n    );\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = IndexPage.prototype.sidebarItems();\n\n    items.setContent(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  navItems(): ItemList<Mithril.Children> {\n    const items = IndexPage.prototype.navItems();\n\n    if (app.initializers.has('flarum-tags')) {\n      // remove the tags from the nav items\n      items.remove('separator');\n      items.remove('moreTags');\n\n      // each tag is added using the key \"tag{id}\". We need to remove all of them\n      for (const key in items.toObject()) {\n        if (key.startsWith('tag') && key !== 'tags') {\n          items.remove(key);\n        }\n      }\n    }\n\n    return items;\n  }\n}\n","import Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Poll from '../models/Poll';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport interface ComposePollHeroAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class ComposePollHero extends Component<ComposePollHeroAttrs> {\n  poll!: Poll;\n\n  oninit(vnode: Mithril.Vnode<ComposePollHeroAttrs>): void {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n  }\n\n  view(): Mithril.Children {\n    return (\n      <div className=\"ComposePollHero Hero\">\n        <div className=\"container\">\n          <div className=\"containerNarrow\">\n            <h2 className=\"Hero-title\">{app.translator.trans(`fof-polls.forum.compose.${!!this.poll.id() ? 'edit' : 'add'}_title`)}</h2>\n            <div className=\"ComposePollHero-controls\">{this.controlItems().toArray()}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  controlItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'edit',\n      <LinkButton\n        icon=\"far fa-edit\"\n        className=\"Button Button--secondary GlobalPollListLink\"\n        itemClassName=\"App-primaryControl\"\n        href={app.route('fof.polls.list')}\n      >\n        {app.translator.trans('fof-polls.forum.compose.polls_manager')}\n      </LinkButton>\n    );\n\n    if (this.poll.exists) {\n      items.add(\n        'view',\n        <LinkButton\n          icon=\"far fa-arrow-up-right-from-square\"\n          className=\"Button Button--secondary PollPreviewLink\"\n          itemClassName=\"App-primaryControl\"\n          href={app.route('fof.polls.view', { id: this.poll.id() })}\n        >\n          {app.translator.trans('fof-polls.forum.compose.polls_preview')}\n        </LinkButton>\n      );\n    }\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport Poll from '../models/Poll';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollForm from './PollForm';\nimport PollFormState from '../states/PollFormState';\nimport ComposePollHero from './ComposePollHero';\nimport Button from 'flarum/common/components/Button';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport IndexPage from 'flarum/forum/components/IndexPage';\n\nexport default class ComposePollPage extends Page {\n  poll: Poll | null | undefined = null;\n\n  loading: boolean = false;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    // prevent users from accessing the page if they can't start global polls or if they are disabled altogether\n    if (!app.forum.attribute<boolean>('globalPollsEnabled') || !app.forum.attribute<boolean>('canStartGlobalPolls')) {\n      m.route.set('/');\n      return;\n    }\n\n    this.bodyClass = 'App--compose-poll';\n\n    // Get the `edit` parameter from the URL\n    const editId = m.route.param('id');\n\n    // either load the poll we're editing or create a new one\n    const pollPromise = editId ? this.loadEditingPoll(editId) : Promise.resolve(PollFormState.createNewPoll());\n\n    pollPromise.then((poll: Poll | null | undefined) => {\n      this.poll = poll;\n\n      if (poll?.exists && !poll.canEdit()) {\n        m.route.set('/');\n        return;\n      }\n\n      app.history.push('compose-poll', app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n      app.setTitle(app.translator.trans(`fof-polls.forum.compose.${!!this.poll?.id() ? 'edit' : 'add'}_title`) as string);\n\n      m.redraw();\n    });\n  }\n\n  async loadEditingPoll(editId: string) {\n    const alreadyLoaded = app.store.getById<Poll>('poll', editId);\n\n    if (alreadyLoaded) return alreadyLoaded;\n\n    this.loading = true;\n\n    const poll = await app.store.find<Poll>('fof/polls', editId);\n\n    this.loading = false;\n\n    return poll;\n  }\n\n  view(): Mithril.Children {\n    if (this.loading || !this.poll) {\n      return <LoadingIndicator />;\n    }\n\n    return (\n      <div className=\"ComposePollPage\">\n        <ComposePollHero poll={this.poll} />\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"PollsPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"sideNavOffset\">\n              <PollForm poll={this.poll} onsubmit={this.onsubmit.bind(this)} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  async onsubmit(data: Object, state: PollFormState) {\n    const isNew = state.poll.id() === undefined;\n    await state.save(data);\n\n    const alertAttrs = isNew\n      ? {\n          type: 'success',\n          controls: [\n            <Button\n              className=\"Button Button--link\"\n              onclick={() =>\n                m.route.set(\n                  app.route('fof.polls.compose', {\n                    id: state.poll.id(),\n                  })\n                )\n              }\n            >\n              {app.translator.trans('fof-polls.forum.compose.continue_editing')}\n            </Button>,\n          ],\n        }\n      : {\n          type: 'success',\n        };\n\n    // Show success alert\n    const alertId = app.alerts.show(alertAttrs, app.translator.trans('fof-polls.forum.compose.success'));\n\n    // Hide alert after 10 seconds\n    setTimeout(() => app.alerts.dismiss(alertId), 10000);\n\n    if (isNew) {\n      m.route.set(app.route('fof.polls.list'));\n    }\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport PollForm from './PollForm';\nimport PollModel from '../models/Poll';\nimport PollFormState from '../states/PollFormState';\n\ninterface CreatePollModalAttrs extends IInternalModalAttrs {\n  poll: PollModel;\n  onsubmit: (data: object) => Promise<void>;\n}\n\nexport default class CreatePollModal extends Modal<CreatePollModalAttrs> {\n  title(): Mithril.Children {\n    return app.translator.trans('fof-polls.forum.modal.add_title');\n  }\n\n  className(): string {\n    return 'PollDiscussionModal Modal--medium';\n  }\n\n  content(): Mithril.Children {\n    return [\n      <div className=\"Modal-body\">\n        <PollForm poll={this.attrs.poll} onsubmit={this.onFormSubmit.bind(this)}></PollForm>\n      </div>,\n    ];\n  }\n\n  async onFormSubmit(data: object, state: PollFormState): Promise<void> {\n    this.hide();\n    await this.attrs.onsubmit(data);\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport CreatePollModal from './CreatePollModal';\nimport PollFormState from '../states/PollFormState';\n\nexport default class EditPollModal extends CreatePollModal {\n  title(): Mithril.Children {\n    return app.translator.trans('fof-polls.forum.modal.edit_title');\n  }\n\n  async onFormSubmit(data: object, state: PollFormState): Promise<void> {\n    await state.save(data);\n\n    // Show success alert\n    const alertId = app.alerts.show(\n      {\n        type: 'success',\n      },\n      app.translator.trans('fof-polls.forum.compose.success')\n    );\n\n    // Hide alert after 10 seconds\n    setTimeout(() => app.alerts.dismiss(alertId), 10000);\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport Link from 'flarum/common/components/Link';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollModel from '../models/Poll';\nimport PollVote from '../models/PollVote';\nimport User from 'flarum/common/models/User';\nimport PollOption from '../models/PollOption';\n\ninterface ListVotersModalAttrs extends IInternalModalAttrs {\n  poll: PollModel;\n  onsubmit: (data: object) => Promise<void>;\n}\n\nexport default class ListVotersModal extends Modal<ListVotersModalAttrs> {\n  oninit(vnode: Mithril.Vnode): void {\n    super.oninit(vnode);\n\n    this.loading = true;\n\n    app.store\n      .find('fof/polls', this.attrs.poll.id()!, {\n        include: 'votes,votes.user,votes.option',\n      })\n      .then(() => (this.loading = false))\n      .finally(() => m.redraw());\n  }\n\n  className(): string {\n    return 'Modal--medium VotesModal';\n  }\n\n  title(): Mithril.Children {\n    return app.translator.trans('fof-polls.forum.votes_modal.title');\n  }\n\n  content(): Mithril.Children {\n    const options = this.attrs.poll.options() as PollOption[];\n    return <div className=\"Modal-body\">{this.loading ? <LoadingIndicator /> : options.map(this.optionContent.bind(this))}</div>;\n  }\n\n  optionContent(opt: PollOption): Mithril.Children {\n    const votes = (this.attrs.poll.votes() || []).filter((v) => opt.id() === v!.option()!.id()) as PollVote[];\n\n    return (\n      <div className=\"VotesModal-option\">\n        <h3>{this.optionAnswer(opt)! + ':'}</h3>\n\n        {votes.length ? (\n          <div className=\"VotesModal-list\">{votes.map(this.voteContent.bind(this))}</div>\n        ) : (\n          <h4>{app.translator.trans('fof-polls.forum.modal.no_voters')}</h4>\n        )}\n      </div>\n    );\n  }\n\n  optionAnswer(opt: PollOption): string {\n    return opt.answer();\n  }\n\n  voteContent(vote: PollVote): Mithril.Children {\n    const user = vote.user() as User;\n    const attrs = user && { href: app.route.user(user) };\n\n    return (\n      <Link {...attrs}>\n        {avatar(user)} {username(user)}\n      </Link>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Poll from 'src/forum/models/Poll';\nimport ItemList from 'flarum/common/utils/ItemList';\n\ninterface PollImageAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class PollImage extends Component<PollImageAttrs> {\n  imageUrl: string | null = null;\n  imageAlt: string | null = null;\n\n  oninit(vnode: Mithril.Vnode<PollImageAttrs, this>) {\n    super.oninit(vnode);\n\n    this.imageUrl = this.attrs.poll.imageUrl();\n    this.imageAlt = this.attrs.poll.imageAlt();\n  }\n\n  view(): Mithril.Children {\n    if (!this.imageUrl) {\n      return;\n    }\n\n    return <div className=\"PollImage\">{this.imageItems().toArray()}</div>;\n  }\n\n  imageItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('image', <img src={this.imageUrl} alt={this.imageAlt ?? ''} className=\"PollImage-image\" loading=\"lazy\" />);\n\n    return items;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollListItem from './PollListItem';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport classList from 'flarum/common/utils/classList';\nimport PollListState from '../../states/PollListState';\n\nexport interface PollListAttrs extends ComponentAttrs {\n  state: PollListState;\n}\n\n/**\n * The `PollList` component displays a list of polls.\n */\nexport default class PollList extends Component<PollListAttrs> {\n  view() {\n    const state = this.attrs.state;\n    const params = state.getParams();\n    const isLoading = state.isInitialLoading() || state.isLoadingNext();\n\n    let loading;\n\n    if (isLoading) {\n      loading = <LoadingIndicator />;\n    } else if (state.hasNext()) {\n      loading = (\n        <Button className=\"Button\" onclick={state.loadNext.bind(state)}>\n          {app.translator.trans('fof-polls.forum.polls_list.load_more_button')}\n        </Button>\n      );\n    }\n\n    if (state.isEmpty()) {\n      const text = app.translator.trans('fof-polls.forum.polls_list.empty_text');\n      return (\n        <div className=\"PollList\">\n          <Placeholder text={text} />\n        </div>\n      );\n    }\n\n    return (\n      <div className={classList('PollList', { 'PollList--searchResults': state.isSearchResults() })}>\n        <ul aria-busy={isLoading} className=\"PollList-polls\">\n          {state.getPages().map((pg) => {\n            return pg.items.map((poll) => (\n              <li key={poll.id()} data-id={poll.id()}>\n                <PollListItem poll={poll} params={params} />\n              </li>\n            ));\n          })}\n        </ul>\n        <div className=\"PollList-loadMore\">{loading}</div>\n      </div>\n    );\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport type { PollListParams } from '../../states/PollListState';\nimport SubtreeRetainer from 'flarum/common/utils/SubtreeRetainer';\nimport classList from 'flarum/common/utils/classList';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport Link from 'flarum/common/components/Link';\nimport highlight from 'flarum/common/helpers/highlight';\nimport slidable from 'flarum/forum/utils/slidable';\nimport icon from 'flarum/common/helpers/icon';\nimport abbreviateNumber from 'flarum/common/utils/abbreviateNumber';\nimport Poll from '../../models/Poll';\nimport PollControls from '../../utils/PollControls';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport listItems from 'flarum/common/helpers/listItems';\nimport PollViewPage from '../PollViewPage';\n\nexport interface IPollListItemAttrs extends ComponentAttrs {\n  poll: Poll;\n  params: PollListParams;\n}\n\n/**\n * The `PollListItem` component shows a single poll in the\n * poll list.\n */\nexport default class PollListItem<CustomAttrs extends IPollListItemAttrs = IPollListItemAttrs> extends Component<CustomAttrs> {\n  /**\n   * Ensures that the poll will not be redrawn\n   * unless new data comes in.\n   */\n  subtree!: SubtreeRetainer;\n  poll!: Poll;\n\n  highlightRegExp?: RegExp;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n\n    this.subtree = new SubtreeRetainer(\n      () => this.poll.freshness,\n      () => {\n        const time = app.session.user && app.session.user.markedAllAsReadAt();\n        return time && time.getTime();\n      },\n      () => this.active()\n    );\n  }\n\n  elementAttrs() {\n    return {\n      className: classList('PollListItem', {\n        active: this.active(),\n        'PollListItem--hidden': this.poll.isHidden(),\n        Slidable: 'ontouchstart' in window,\n      }),\n    };\n  }\n\n  view() {\n    const controls = PollControls.controls(this.poll, this).toArray();\n    const attrs = this.elementAttrs();\n\n    return (\n      <div {...attrs}>\n        {this.controlsView(controls)}\n        {this.contentView()}\n        {this.slidableUnderneathView()}\n      </div>\n    );\n  }\n\n  controlsView(controls: Mithril.ChildArray): Mithril.Children {\n    return (\n      !!controls.length && (\n        <Dropdown\n          icon=\"fas fa-ellipsis-v\"\n          className=\"PollListItem-controls\"\n          menuClassName=\"Dropdown-menu--right\"\n          buttonClassName=\"Button Button--icon Button--flat\"\n          accessibleToggleLabel={app.translator.trans('fof-polls.forum.poll_controls.toggle_dropdown_accessible_label')}\n        >\n          {controls}\n        </Dropdown>\n      )\n    );\n  }\n\n  slidableUnderneathView(): Mithril.Children {\n    const isUnread = this.poll.isUnread();\n\n    return (\n      <span\n        className={classList('Slidable-underneath Slidable-underneath--left Slidable-underneath--elastic', { disabled: !isUnread })}\n        onclick={this.markAsRead.bind(this)}\n      >\n        {icon('fas fa-check')}\n      </span>\n    );\n  }\n\n  contentView(): Mithril.Children {\n    // const isUnread = this.poll.isUnread();\n    // const isRead = this.poll.isRead();\n\n    return (\n      //   <div className={classList('PollListItem-content', 'Slidable-content', { unread: isUnread, read: isRead })}>\n      <div className={classList('PollListItem-content')}>{this.mainView()}</div>\n    );\n  }\n\n  mainView(): Mithril.Children {\n    return (\n      <Link href={app.route('fof.polls.view', { id: this.poll.id() })} className=\"PollListItem-main\">\n        <h2 className=\"PollListItem-title\">{highlight(this.pollQuestion(this.poll), this.highlightRegExp)}</h2>\n        {this.poll.subtitle() && <p className=\"PollListItem-subtitle helpText\">{this.pollSubtitle(this.poll)}</p>}\n        <ul className=\"PollListItem-info\">{listItems(this.infoItems().toArray())}</ul>\n      </Link>\n    );\n  }\n\n  /**\n   * Allow extensions to revise the question string.\n   */\n  pollQuestion(poll: Poll): string {\n    return poll.question();\n  }\n\n  /**\n   * Allow extensions to revise the subtitle string.\n   */\n  pollSubtitle(poll: Poll): string | null {\n    return poll.subtitle();\n  }\n\n  oncreate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.oncreate(vnode);\n\n    // If we're on a touch device, set up the discussion row to be slidable.\n    // This allows the user to drag the row to either side of the screen to\n    // reveal controls.\n    if ('ontouchstart' in window) {\n      const slidableInstance = slidable(this.element);\n\n      this.$('.PollListItem-controls').on('hidden.bs.dropdown', () => slidableInstance.reset());\n    }\n  }\n\n  onbeforeupdate(vnode: Mithril.VnodeDOM<CustomAttrs, this>) {\n    super.onbeforeupdate(vnode);\n\n    return this.subtree.needsRebuild();\n  }\n\n  /**\n   * Determine whether or not the discussion is currently being viewed.\n   */\n  active() {\n    return app.current.matches(PollViewPage, { poll: this.poll });\n  }\n\n  /**\n   * Mark the poll as read.\n   */\n  markAsRead() {\n    if (this.poll.isUnread()) {\n      this.poll.save({ lastVotedNumber: this.poll.voteCount() });\n      m.redraw();\n    }\n  }\n\n  infoItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const active = !this.poll.hasEnded();\n    const activeView = this.poll.endDate()\n      ? [\n          icon('fas fa-clock'),\n          ' ',\n          active\n            ? app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(this.poll.endDate()).fromNow() })\n            : app.translator.trans('fof-polls.forum.poll_ended'),\n        ]\n      : [icon('fas fa-infinity'), ' ', app.translator.trans('fof-polls.forum.poll_never_ends')];\n\n    items.add('active', <span className={classList('PollListItem-endStatus', { active })}>{activeView}</span>);\n\n    const voteCount = this.poll.voteCount();\n    if (voteCount !== undefined) {\n      items.add(\n        'voteCount',\n        <span>\n          {icon('fas fa-poll fa-fw')}\n          {[\n            ' ',\n            app.translator.trans('fof-polls.forum.polls_count', {\n              count: abbreviateNumber(voteCount),\n            }),\n          ]}\n        </span>,\n        70\n      );\n    }\n\n    return items;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOptionModel from '../../models/PollOption';\nimport PollState from '../../states/PollState';\nimport Tooltip, { TooltipAttrs } from 'flarum/common/components/Tooltip';\nimport icon from 'flarum/common/helpers/icon';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Poll from '../../models/Poll';\n\ninterface PollOptionAttrs extends ComponentAttrs {\n  option: PollOptionModel;\n  name: string;\n  state: PollState;\n}\n\nexport default class PollOption extends Component<PollOptionAttrs, PollState> {\n  option!: PollOptionModel;\n  name!: string;\n  state!: PollState;\n  hasVoted: boolean = false;\n  totalVotes: number = 0;\n  votes: number = 0;\n  voted: boolean = false;\n  poll!: Poll;\n  canSeeVoteCount: boolean = false;\n  answer!: string;\n\n  oninit(vnode: Mithril.Vnode<PollOptionAttrs, PollState>) {\n    super.oninit(vnode);\n    this.option = this.attrs.option;\n    this.name = this.attrs.name;\n    this.state = this.attrs.state;\n    this.poll = this.state.poll;\n\n    // isNaN(null) is false, so we have to check type directly now that API always returns the field\n    this.canSeeVoteCount = typeof this.votes === 'number';\n\n    this.answer = this.option.answer();\n  }\n\n  percent(): number {\n    return this.totalVotes > 0 ? Math.round((this.votes / this.totalVotes) * 100) : 0;\n  }\n\n  view(): Mithril.Children {\n    // following values can be changed by ui interactions, so we need to update them on every render\n    this.hasVoted = this.state.hasVoted();\n    this.totalVotes = this.state.overallVoteCount();\n    this.votes = this.option.voteCount();\n    this.voted = this.state.hasVotedFor(this.option);\n\n    const isDisabled = this.state.loadingOptions || (this.hasVoted && !this.poll.canChangeVote());\n    const width = this.canSeeVoteCount ? this.percent() : (Number(this.voted) / (this.poll.myVotes()?.length || 1)) * 100;\n\n    const bar = (\n      <label className=\"PollBar\" data-selected={!!this.voted} style={`--poll-option-width: ${width}%`}>\n        {this.state.showCheckMarks && (\n          <div className=\"PollAnswer-checkbox\">\n            <input\n              className=\"PollAnswer-input sr-only\"\n              type=\"checkbox\"\n              id={this.option.id()}\n              name={this.name}\n              value={this.answer}\n              checked={this.voted}\n              disabled={isDisabled}\n              aria-labelledby={`${this.name}-${this.option.id()}-label`}\n              onchange={this.state.changeVote.bind(this.state, this.option)}\n            />\n            <span className=\"checkmark\" />\n          </div>\n        )}\n\n        <div className=\"PollAnswer-text\">{this.optionDisplayItems().toArray()}</div>\n\n        {this.option.imageUrl() ? <img className=\"PollAnswer-image\" src={this.option.imageUrl()} alt={this.option.answer()} loading=\"lazy\" /> : null}\n      </label>\n    );\n\n    return (\n      <div\n        className={classList('PollOption', this.hasVoted && 'PollVoted', this.option.imageUrl() && 'PollOption-hasImage')}\n        data-id={this.option.id()}\n      >\n        {this.canSeeVoteCount ? (\n          <Tooltip text={app.translator.trans('fof-polls.forum.tooltip.votes', { count: this.votes })} onremove={this.hideOptionTooltip}>\n            {bar}\n          </Tooltip>\n        ) : (\n          bar\n        )}\n      </div>\n    );\n  }\n\n  /**\n   * Attempting to use the `tooltipVisible` attr on the Tooltip component set to 'false' when no vote count\n   * caused the tooltip to break on click. This is a workaround to hide the tooltip when no vote count is available,\n   * called on 'onremove' of the Tooltip component. It doesn't always work as intended either, but it does the job.\n   */\n  hideOptionTooltip(vnode: Mithril.Vnode<TooltipAttrs, Tooltip>) {\n    vnode.attrs.tooltipVisible = false;\n\n    // @ts-ignore\n    vnode.state.updateVisibility();\n  }\n\n  optionDisplayItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'answer',\n      <span className=\"PollAnswer-text-answer\" id={`${this.name}-${this.option.id()}-label`}>\n        {this.answer}\n      </span>\n    );\n\n    this.voted && !this.state.showCheckMarks && items.add('check', icon('fas fa-check-circle', { className: 'PollAnswer-check' }));\n\n    this.canSeeVoteCount &&\n      items.add('percent', <span className={classList('PollPercent', this.percent() !== 100 && 'PollPercent--option')}>{this.percent()}%</span>);\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollOption from './PollOption';\nimport PollOptionModel from '../../models/PollOption';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollState from '../../states/PollState';\n\ninterface PollOptionsAttrs extends ComponentAttrs {\n  options: PollOptionModel[];\n  name: String;\n  state: PollState;\n}\n\nexport default class PollOptions extends Component<PollOptionsAttrs> {\n  view(): Mithril.Children {\n    return <div className=\"Poll-options list-layout\">{this.pollOptions().toArray()}</div>;\n  }\n\n  pollOptions(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    this.attrs.options.forEach((option: PollOptionModel): void => {\n      items.add('option' + option.id(), this.createOptionView(option));\n    });\n\n    return items;\n  }\n\n  createOptionView(option: PollOptionModel): Mithril.Children {\n    return <PollOption name={this.attrs.name} option={option} state={this.attrs.state} />;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport PollState from '../../states/PollState';\n\ninterface PollSubmitButtonAttrs extends ComponentAttrs {\n  state: PollState;\n}\n\nexport default class PollSubmitButton extends Component<PollSubmitButtonAttrs> {\n  view(): Mithril.Children {\n    const state = this.attrs.state;\n    return (\n      <Button\n        className=\"Button Button--primary Poll-submit\"\n        loading={state.loadingOptions}\n        onclick={(event: Event) => this.pollButtonSubmit(state, event)}\n        disabled={!state.hasSelectedOptions()}\n      >\n        {app.translator.trans('fof-polls.forum.poll.submit_button')}\n      </Button>\n    );\n  }\n\n  /**\n   * Event handler for submit button being clicked\n   */\n\n  pollButtonSubmit(state: PollState, event: Event): void {\n    state.onsubmit();\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Poll from 'src/forum/models/Poll';\nimport Mithril from 'mithril';\n\nexport interface PollSubtitleAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class PollSubtitle extends Component<PollSubtitleAttrs> {\n  view() {\n    if (!this.attrs.poll.subtitle()) {\n      return;\n    }\n\n    return <div className=\"Poll-subtitle-component\">{this.pollSubtitleItems().toArray()}</div>;\n  }\n\n  pollSubtitleItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('subtitle', <p className=\"Poll-subtitle\">{this.attrs.poll.subtitle()}</p>);\n\n    return items;\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Poll from 'src/forum/models/Poll';\nimport Mithril from 'mithril';\n\nexport interface PollTitleAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class PollTitle extends Component<PollTitleAttrs> {\n  view() {\n    return <div className=\"Poll-title-component\">{this.pollTitleItems().toArray()}</div>;\n  }\n\n  pollTitleItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('title', <h3 className=\"Poll-title\">{this.attrs.poll.question()}</h3>);\n\n    return items;\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Stream from 'flarum/common/utils/Stream';\nimport extractText from 'flarum/common/utils/extractText';\nimport FormError from './form/FormError';\nimport PollFormState from '../states/PollFormState';\nimport PollControls from '../utils/PollControls';\nimport PollModel from '../models/Poll';\nimport PollOption from '../models/PollOption';\nimport UploadPollImageButton from './UploadPollImageButton';\nimport Poll from '../models/Poll';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport RequestError from 'flarum/common/utils/RequestError';\n\ninterface PollFormAttrs extends ComponentAttrs {\n  poll: PollModel;\n  onsubmit: (data: object, state: PollFormState) => Promise<void>;\n}\n\nexport default class PollForm extends Component<PollFormAttrs, PollFormState> {\n  protected options: PollOption[] = [];\n  protected optionAnswers: Stream<string>[] = [];\n  protected optionImageUrls: Stream<string>[] = [];\n  protected question: Stream<string>;\n  protected subtitle: Stream<string>;\n  protected image: Stream<string | null>;\n  protected imageAlt: Stream<string | null>;\n  protected endDate: Stream<string | null>;\n  protected publicPoll: Stream<boolean>;\n  protected allowMultipleVotes: Stream<boolean>;\n  protected hideVotes: Stream<boolean>;\n  protected allowChangeVote: Stream<boolean>;\n  protected maxVotes: Stream<number>;\n  protected datepickerMinDate: string = '';\n\n  oninit(vnode: Mithril.Vnode): void {\n    super.oninit(vnode);\n    this.state = new PollFormState(this.attrs.poll);\n\n    // state handles poll initialization\n    const poll = this.state.poll;\n\n    this.options = (poll.tempOptions ?? poll.options()) as PollOption[];\n    this.optionAnswers = this.options.map((o) => Stream(o.answer()));\n    this.optionImageUrls = this.options.map((o) => Stream(o.imageUrl()));\n\n    this.question = Stream(poll.question());\n    this.subtitle = Stream(poll.subtitle());\n    this.image = Stream(poll.image());\n    this.imageAlt = Stream(poll.imageAlt());\n    this.endDate = Stream(this.formatDate(poll.endDate()));\n    this.publicPoll = Stream(poll.publicPoll());\n    this.allowMultipleVotes = Stream(poll.allowMultipleVotes());\n    this.hideVotes = Stream(poll.hideVotes());\n    this.allowChangeVote = Stream(poll.allowChangeVote());\n    this.maxVotes = Stream(poll.maxVotes() || 0);\n\n    // Set minimum date for datepicker to current date\n    this.datepickerMinDate = this.formatDate() as string;\n\n    // Replace minimum of 'today' for poll end date only if the poll is not already closed\n    if (this.endDate() && dayjs(poll.endDate).isAfter(dayjs())) {\n      // We know that endDate is set, so we can safely cast the result to string\n      this.datepickerMinDate = this.formatDate(poll.endDate()) as string;\n    }\n  }\n\n  view(): Mithril.Children {\n    return (\n      <form onsubmit={this.onsubmit.bind(this)}>\n        <div className=\"PollDiscussionModal-form\">{this.fields().toArray()}</div>\n      </form>\n    );\n  }\n\n  fields(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'question',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.question_placeholder')}</label>\n\n        <input type=\"text\" name=\"question\" className=\"FormControl\" bidi={this.question} />\n      </div>,\n      100\n    );\n\n    items.add(\n      'subtitle',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.subtitle_placeholder')}</label>\n\n        <input type=\"text\" name=\"subtitle\" className=\"FormControl\" bidi={this.subtitle} />\n      </div>,\n      95\n    );\n\n    const hasImage = this.image();\n\n    items.add(\n      'poll_image',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.poll_image.label')}</label>\n        {this.uploadConditional(\n          hasImage,\n          this.state.poll?.isImageUpload(),\n          <>\n            <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.poll_image.help')}</p>\n            <input type=\"hidden\" name=\"pollImage\" bidi={this.image} />\n          </>,\n          <UploadPollImageButton name=\"pollImage\" poll={this.state.poll} onUpload={this.pollImageUploadSuccess.bind(this)} />,\n          <input\n            type=\"text\"\n            name=\"pollImage\"\n            className=\"FormControl\"\n            bidi={this.image}\n            placeholder={app.translator.trans('fof-polls.forum.modal.image_option_placeholder')}\n          />\n        )}\n      </div>,\n      90\n    );\n\n    if (hasImage) {\n      items.add(\n        'poll_image_alt',\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.poll_image.alt_label')}</label>\n\n          <input type=\"text\" required name=\"imageAlt\" className=\"FormControl\" bidi={this.imageAlt} />\n\n          <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.poll_image.alt_help_text')}</p>\n        </div>,\n        90\n      );\n    }\n\n    items.add(\n      'answers',\n      <div className=\"PollModal--answers Form-group\">\n        <label className=\"label PollModal--answers-title\">\n          <span>{app.translator.trans('fof-polls.forum.modal.options_label')}</span>\n        </label>\n\n        {this.displayOptions().toArray()}\n\n        <Tooltip text={app.translator.trans('fof-polls.forum.modal.tooltip.options.add-button')}>\n          <Button className=\"Button PollModal--button Button--icon PollModal--add-button\" icon=\"fas fa-plus\" onclick={this.addOption.bind(this)} />\n        </Tooltip>\n      </div>,\n      80\n    );\n\n    items.add(\n      'date',\n      <div className=\"Form-group\">\n        <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.date_placeholder')}</label>\n\n        <div className=\"PollModal--date\">\n          <input\n            className=\"FormControl\"\n            type=\"datetime-local\"\n            name=\"date\"\n            bidi={this.endDate}\n            min={this.datepickerMinDate}\n            max={this.formatDate('2038')}\n          />\n          {Button.component({\n            className: 'Button PollModal--button Button--icon',\n            icon: 'fas fa-times',\n            onclick: this.endDate.bind(this, null),\n          })}\n        </div>\n\n        {this.endDate() && (\n          <p className=\"helpText\">\n            <i class=\"icon fas fa-clock\" />\n            &nbsp;\n            {dayjs(this.endDate()).isBefore(dayjs())\n              ? app.translator.trans('fof-polls.forum.poll_ended')\n              : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(this.endDate()).fromNow() })}\n          </p>\n        )}\n      </div>,\n      40\n    );\n\n    items.add(\n      'public',\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.publicPoll() || false,\n            onchange: this.publicPoll,\n          },\n          app.translator.trans('fof-polls.forum.modal.public_poll_label')\n        )}\n      </div>,\n      20\n    );\n\n    items.add(\n      'hide-votes',\n      <div className=\"Form-group\">\n        <Switch state={this.endDate() && this.hideVotes()} onchange={this.hideVotes} disabled={!this.endDate()}>\n          {app.translator.trans('fof-polls.forum.modal.hide_votes_label')}\n        </Switch>\n        <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.hide_votes_label_help')}</p>\n      </div>,\n      20\n    );\n\n    items.add(\n      'allow-change-vote',\n      <div className=\"Form-group\">\n        <Switch state={this.allowChangeVote()} onchange={this.allowChangeVote}>\n          {app.translator.trans('fof-polls.forum.modal.allow_change_vote_label')}\n        </Switch>\n      </div>,\n      20\n    );\n\n    items.add(\n      'allow-multiple-votes',\n      <div className=\"Form-group\">\n        {Switch.component(\n          {\n            state: this.allowMultipleVotes() || false,\n            onchange: this.allowMultipleVotes,\n          },\n          app.translator.trans('fof-polls.forum.modal.allow_multiple_votes_label')\n        )}\n      </div>,\n      15\n    );\n\n    if (this.allowMultipleVotes()) {\n      items.add(\n        'max-votes',\n        <div className=\"Form-group\">\n          <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.max_votes_label')}</label>\n\n          <input type=\"number\" min=\"0\" max={this.options.length} name=\"maxVotes\" className=\"FormControl\" bidi={this.maxVotes} />\n\n          <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.max_votes_help')}</p>\n        </div>,\n        15\n      );\n    }\n\n    items.add(\n      'submit',\n      <div className=\"Form-group\">\n        <Button type=\"submit\" className=\"Button Button--primary PollModal-SubmitButton\" icon=\"fas fa-save\" loading={this.state.loading}>\n          {app.translator.trans('fof-polls.forum.modal.submit')}\n        </Button>\n        {this.state.poll.exists && (\n          <Button\n            className=\"Button Button--secondary PollModal-deleteButton\"\n            icon=\"fas fa-trash-alt\"\n            loading={this.state.deleting}\n            onclick={this.delete.bind(this)}\n          >\n            {app.translator.trans('fof-polls.forum.modal.delete')}\n          </Button>\n        )}\n      </div>,\n      -10\n    );\n\n    return items;\n  }\n\n  displayOptions(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const canUpload = app.forum.attribute<boolean>('canUploadPollImages');\n\n    this.options.forEach((option, i) => {\n      const imgFunc = this.optionImageUrls[i];\n\n      items.add(\n        'option-' + i,\n        <div className=\"Form-group\">\n          <fieldset className=\"Poll-answer-input\">\n            <input\n              className=\"FormControl\"\n              type=\"text\"\n              name={'answer' + (i + 1)}\n              bidi={this.optionAnswers[i]}\n              placeholder={app.translator.trans('fof-polls.forum.modal.option_placeholder') + ' #' + (i + 1)}\n            />\n            {app.forum.attribute<boolean>('allowPollOptionImage') && (\n              <div className=\"Poll-answer-image\">\n                {this.uploadConditional(\n                  !!imgFunc(),\n                  option?.isImageUpload(),\n                  <>\n                    <label className=\"label\">{app.translator.trans('fof-polls.forum.modal.poll_option_image.label')}</label>\n                    <p className=\"helpText\">{app.translator.trans('fof-polls.forum.modal.poll_option_image.help')}</p>\n                    <input type=\"hidden\" name={'answerImage' + (i + 1)} value={imgFunc()} />\n                  </>,\n\n                  <UploadPollImageButton name=\"pollOptionImage\" option={option} onUpload={this.pollOptionImageUploadSuccess.bind(this, i)} />,\n\n                  <input\n                    type=\"text\"\n                    name={'answerImage' + (i + 1)}\n                    className=\"FormControl\"\n                    bidi={imgFunc}\n                    placeholder={app.translator.trans('fof-polls.forum.modal.image_option_placeholder')}\n                  />\n                )}\n              </div>\n            )}\n          </fieldset>\n          {i >= 2\n            ? Button.component({\n                type: 'button',\n                className: 'Button PollModal--button Button--icon',\n                icon: 'fas fa-minus',\n                onclick: i >= 2 ? this.removeOption.bind(this, i) : '',\n              })\n            : ''}\n        </div>\n      );\n    });\n\n    return items;\n  }\n\n  addOption() {\n    const max = Math.max(app.forum.attribute('pollMaxOptions'), 2);\n\n    if (this.options.length < max) {\n      this.options.push(app.store.createRecord('poll_options'));\n      this.optionAnswers.push(Stream(''));\n      this.optionImageUrls.push(Stream(''));\n    } else {\n      alert(extractText(app.translator.trans('fof-polls.forum.modal.max', { max })));\n    }\n  }\n\n  removeOption(i: number): void {\n    this.options.splice(i, 1);\n    this.optionAnswers.splice(i, 1);\n    this.optionImageUrls.splice(i, 1);\n  }\n\n  data(): object {\n    if (this.question() === '') {\n      throw new FormError(app.translator.trans('fof-polls.forum.modal.include_question'));\n    }\n\n    if (this.options.length < 2) {\n      throw new FormError(app.translator.trans('fof-polls.forum.modal.min'));\n    }\n\n    const pollExists = this.state.poll.exists;\n    const options = this.options.map((option, i) => {\n      option.pushAttributes({\n        answer: this.optionAnswers[i](),\n        imageUrl: this.optionImageUrls[i](),\n      });\n\n      return pollExists ? option.data : option.data.attributes;\n    });\n\n    return {\n      question: this.question(),\n      subtitle: this.subtitle(),\n      pollImage: this.image(),\n      imageAlt: this.imageAlt(),\n      endDate: this.dateToTimestamp(this.endDate()) ?? false,\n      publicPoll: this.publicPoll(),\n      hideVotes: this.hideVotes(),\n      allowChangeVote: this.allowChangeVote(),\n      allowMultipleVotes: this.allowMultipleVotes(),\n      maxVotes: this.maxVotes(),\n      options,\n    };\n  }\n\n  async onsubmit(event: Event) {\n    event.preventDefault();\n\n    try {\n      await this.attrs.onsubmit(this.data(), this.state);\n    } catch (error) {\n      if (error instanceof FormError) {\n        app.alerts.show({ type: 'error' }, error.message);\n      } else if (error instanceof RequestError) {\n        console.error(error);\n        app.alerts.show({ type: 'error' }, app.translator.trans('fof-polls.forum.modal.error'));\n      }\n    }\n  }\n\n  async delete(): Promise<void> {\n    this.state.loading = true;\n    try {\n      await PollControls.deleteAction(this.state.poll);\n      this.state.deleting = true;\n    } finally {\n      this.state.loading = false;\n      m.redraw();\n    }\n  }\n\n  formatDate(date: Date | string | false | undefined | null = undefined, def: Date | false = false): string | false {\n    const dayjsDate = dayjs(date);\n\n    if (date === false || !dayjsDate.isValid()) return def !== false ? this.formatDate(def) : false;\n\n    return dayjsDate.format('YYYY-MM-DDTHH:mm');\n  }\n\n  dateToTimestamp(date: Date | false): string | null {\n    const dayjsDate = dayjs(date);\n\n    if (!date || !dayjsDate.isValid()) return null;\n\n    return dayjsDate.format();\n  }\n\n  pollImageUploadSuccess(fileName: string | null | undefined): void {\n    this.image(fileName);\n  }\n\n  pollOptionImageUploadSuccess(index: number, fileName: string | null | undefined): void {\n    this.optionImageUrls[index] = Stream(fileName);\n  }\n\n  uploadConditional(hasImage: boolean, isUpload: boolean, ifCanUpload: JSX.Element, uploadButton: JSX.Element, imageUrlInput: JSX.Element) {\n    const canUpload = app.forum.attribute<boolean>('canUploadPollImages');\n    const canUploadNow = this.state.poll?.exists || (app.forum.attribute('canStartPolls') && app.forum.attribute('canStartGlobalPolls'));\n\n    // if can upload OR image is already uploaded\n    if (canUpload || isUpload) {\n      // may not have enough permissions to upload before creating poll\n      if (!canUploadNow && !isUpload) {\n        return (\n          <>\n            {imageUrlInput}\n            <p class=\"helpText\">{app.translator.trans('fof-polls.forum.modal.poll_image.later_help')}</p>\n          </>\n        );\n      }\n\n      return (\n        <>\n          {ifCanUpload}\n          <div class=\"Poll-image-inputs\">\n            {!hasImage && imageUrlInput}\n            {uploadButton}\n          </div>\n        </>\n      );\n    }\n\n    return imageUrlInput;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport classList from 'flarum/common/utils/classList';\nimport icon from 'flarum/common/helpers/icon';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\n\ninterface PollPageHeroAttrs extends ComponentAttrs {\n  icon?: string;\n  title?: string;\n}\n\nexport default class PollPageHero extends Component<PollPageHeroAttrs> {\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n  }\n\n  get classNames(): string {\n    return classList({\n      PollPageHero: true,\n      Hero: true,\n    });\n  }\n\n  get wrapperClasses(): string {\n    return classList({\n      'PollPageHero--wrapper': true,\n    });\n  }\n\n  oncreate(vnode: Mithril.Vnode): void {\n    super.oncreate(vnode);\n  }\n\n  get title() {\n    return this.attrs.title || app.translator.trans('fof-polls.forum.polls_page.title');\n  }\n\n  get icon() {\n    return this.attrs.icon || 'fas fa-poll';\n  }\n\n  view() {\n    return (\n      <div className={this.wrapperClasses}>\n        <header className={this.classNames}>\n          <div className=\"container\">\n            <div className=\"containerNarrow\">{this.items().toArray()}</div>\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  items() {\n    const items = new ItemList();\n    items.add('title', <h2 className=\"Hero-title\">{[icon(this.icon), ' ', this.title]}</h2>, 50);\n\n    return items;\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport PollListState from '../states/PollListState';\nimport type Mithril from 'mithril';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollShowcaseItem from './PollShowcaseItem';\nimport Placeholder from 'flarum/common/components/Placeholder';\nimport app from 'flarum/forum/app';\n\nexport interface PollListAttrs extends ComponentAttrs {\n  state: PollListState;\n}\n\nexport default class PollShowcase extends Component<PollListAttrs, PollListState> {\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    this.attrs.state.refresh();\n  }\n\n  view(): Mithril.Children {\n    return (\n      <div className=\"PollShowcase\">\n        <div className=\"PollShowcase--active\">\n          <h2 className=\"PollShowcase-title PollShowcase-title--active\">{app.translator.trans('fof-polls.forum.showcase.active-polls')}</h2>\n          {this.showcaseItems().toArray()}\n          {this.showcaseItems().toArray().length === 0 && <Placeholder text={app.translator.trans('fof-polls.forum.showcase.no-active-polls')} />}\n        </div>\n        <div className=\"PollShowcase--ended\">\n          <h2 className=\"PollShowcase-title PollShowcase-title--ended\">{app.translator.trans('fof-polls.forum.showcase.ended-polls')}</h2>\n          {this.endedItems().toArray()}\n          {this.endedItems().toArray().length === 0 && <Placeholder text={app.translator.trans('fof-polls.forum.showcase.no-recent-polls')} />}\n        </div>\n      </div>\n    );\n  }\n\n  showcaseItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    this.attrs.state.getPages().map((page) => {\n      page.items.map((poll) => {\n        if (!poll.hasEnded()) {\n          items.add('poll-active-' + poll.id(), <PollShowcaseItem poll={poll} />);\n        }\n      });\n    });\n\n    return items;\n  }\n\n  endedItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    this.attrs.state.getPages().map((page) => {\n      page.items.map((poll) => {\n        if (poll.hasEnded()) {\n          items.add('poll-ended-' + poll.id(), <PollShowcaseItem poll={poll} />);\n        }\n      });\n    });\n\n    return items;\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Poll from '../models/Poll';\nimport type Mithril from 'mithril';\nimport PollView from './PollView';\n\nexport interface PollShowcaseItemAttrs extends ComponentAttrs {\n  poll: Poll;\n}\n\nexport default class PollShowcaseItem extends Component<PollShowcaseItemAttrs> {\n  poll!: Poll;\n\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    this.poll = this.attrs.poll;\n  }\n\n  view() {\n    return (\n      <div className=\"PollShowcase--item\">\n        <PollView poll={this.poll} />\n      </div>\n    );\n  }\n}\n","import Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport app from 'flarum/forum/app';\nimport PollOptions from './Poll/PollOptions';\nimport PollImage from './Poll/PollImage';\nimport PollModel from '../models/Poll';\nimport PollState from '../states/PollState';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PollControls from '../utils/PollControls';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport PollSubmitButton from './Poll/PollSubmitButton';\nimport { slug } from 'flarum/common/utils/string';\nimport classList from 'flarum/common/utils/classList';\nimport PollTitle from './Poll/PollTitle';\nimport PollSubtitle from './Poll/PollSubtitle';\n\ninterface PollAttrs extends ComponentAttrs {\n  poll: PollModel;\n}\n\nexport default class PollView extends Component<PollAttrs, PollState> {\n  state!: PollState;\n\n  oninit(vnode: Mithril.Vnode<PollAttrs, this>) {\n    super.oninit(vnode);\n    this.state = new PollState(this.attrs.poll);\n  }\n\n  oncreate(vnode: Mithril.Vnode<PollAttrs, this>) {\n    super.oncreate(vnode);\n\n    this.preventClose = this.preventClose.bind(this);\n    window.addEventListener('beforeunload', this.preventClose);\n  }\n\n  onremove(vnode: Mithril.Vnode<PollAttrs, this>) {\n    super.onremove(vnode);\n\n    window.removeEventListener('beforeunload', this.preventClose);\n  }\n\n  view(): Mithril.Children {\n    const poll = this.attrs.poll;\n    const state = this.state;\n    // @ts-expect-error\n    const controls = PollControls.controls(poll, this);\n\n    (poll.publicPoll() || poll.canEdit()) &&\n      controls.add(\n        'view',\n        <Button onclick={state.showVoters} icon=\"fas fa-poll\">\n          {app.translator.trans('fof-polls.forum.public_poll')}\n        </Button>\n      );\n\n    return (\n      <div className={classList('Poll', poll.imageUrl() && 'Poll--image')} data-id={poll.id()}>\n        {this.controlsView(controls.toArray())}\n        <div className=\"Poll-wrapper\">{this.createMainView().toArray()}</div>\n      </div>\n    );\n  }\n\n  createMainView(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('header', <div className=\"Poll-header\">{this.createPollHeader().toArray()}</div>);\n    items.add('content', <div className=\"Poll-content\">{this.createPollContent().toArray()}</div>);\n    items.add('footer', <div className=\"Poll-footer\">{this.createPollFooter().toArray()}</div>);\n\n    return items;\n  }\n\n  createPollHeader(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    items.add('title', <PollTitle poll={poll} />);\n    if (poll.subtitle()) items.add('subtitle', <PollSubtitle poll={poll} />);\n\n    return items;\n  }\n\n  createPollContent(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    if (poll.imageUrl()) {\n      items.add('image', <PollImage poll={poll} />);\n    }\n\n    items.add('form', <form className=\"Poll-form\">{this.createFormItems().toArray()}</form>);\n\n    return items;\n  }\n\n  createPollFooter(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const state = this.state;\n\n    const infoItems = this.infoItems(state.getMaxVotes());\n\n    items.add(\n      'sticky',\n      <div className=\"Poll-sticky\">\n        {!infoItems.isEmpty() && <div className=\"helpText PollInfoText\">{infoItems.toArray()}</div>}\n        {state.showButton() && <PollSubmitButton state={state} />}\n      </div>\n    );\n\n    return items;\n  }\n\n  createFormItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n    const state = this.state;\n    const questionSlug = slug(poll.question());\n\n    items.add(\n      'elements',\n      <fieldset>\n        <legend className=\"sr-only\">{poll.question()}</legend>\n        <PollOptions name={questionSlug} options={poll.options()} state={state} />\n      </fieldset>\n    );\n\n    return items;\n  }\n\n  controlsView(controls: Mithril.ChildArray): Mithril.Children {\n    return (\n      !!controls.length && (\n        <Dropdown\n          icon=\"fas fa-ellipsis-v\"\n          className=\"PollListItem-controls\"\n          menuClassName=\"Dropdown-menu--right\"\n          buttonClassName=\"Button Button--icon Button--flat\"\n          accessibleToggleLabel={app.translator.trans('fof-polls.forum.poll_controls.toggle_dropdown_accessible_label')}\n        >\n          {controls}\n        </Dropdown>\n      )\n    );\n  }\n\n  infoItems(maxVotes: number) {\n    const items = new ItemList<Mithril.Children>();\n    const poll = this.attrs.poll;\n\n    if (app.session.user && !poll.canVote() && !poll.hasEnded()) {\n      items.add(\n        'no-permission',\n        <span>\n          <i className=\"icon fas fa-times-circle fa-fw\" />\n          {app.translator.trans('fof-polls.forum.no_permission')}\n        </span>\n      );\n    }\n\n    if (poll.endDate()) {\n      items.add(\n        'end-date',\n        <span>\n          <i class=\"icon fas fa-clock fa-fw\" />\n          {poll.hasEnded()\n            ? app.translator.trans('fof-polls.forum.poll_ended')\n            : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(poll.endDate()).fromNow() })}\n        </span>\n      );\n    }\n\n    if (poll.canVote() && !poll.hasEnded() && !this.state.hasVoted()) {\n      items.add(\n        'max-votes',\n        <span>\n          <i className=\"icon fas fa-poll fa-fw\" />\n          {app.translator.trans('fof-polls.forum.max_votes_allowed', { max: maxVotes })}\n        </span>\n      );\n\n      if (!poll.canChangeVote()) {\n        items.add(\n          'cannot-change-vote',\n          <span>\n            <i className={`icon fas fa-${this.state.hasVoted() ? 'times' : 'exclamation'}-circle fa-fw`} />\n            {app.translator.trans('fof-polls.forum.poll.cannot_change_vote')}\n          </span>\n        );\n      }\n    }\n\n    if (poll.hasEnded() || this.state.hasVoted()) {\n      items.add(\n        'total-vote-count',\n        <span>\n          <i className=\"icon fas fa-poll fa-fw\" aria-hidden=\"true\" />\n          {app.translator.trans('fof-polls.forum.poll.total_votes', { count: poll.voteCount() })}\n        </span>\n      );\n    }\n\n    return items;\n  }\n\n  /**\n   * Alert before navigating away using browser's 'beforeunload' event\n   */\n  preventClose = (e: Event): boolean | void => {\n    if (this.state.hasSelectedOptions()) {\n      e.preventDefault();\n      return true;\n    }\n  };\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport PollModel from '../models/Poll';\nimport PollView from './PollView';\nimport { AbstractPollPage } from './AbstractPollPage';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nexport default class PollViewPage extends AbstractPollPage {\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    if (!app.forum.attribute<boolean>('globalPollsEnabled')) {\n      m.route.set('/');\n      return;\n    }\n\n    const editId = m.route.param('id');\n    this.poll = app.store.getById<PollModel>('poll', editId);\n\n    if (!this.poll) {\n      this.loading = true;\n\n      app.store.find<PollModel>('fof/polls', editId).then((item) => {\n        this.poll = item;\n        this.loading = false;\n        app.setTitle(this.poll.question());\n        m.redraw();\n      });\n    }\n  }\n\n  contentItems(): ItemList<Mithril.Children> {\n    const items = super.contentItems();\n\n    if (!this.loading) {\n      items.add('poll', <PollView poll={this.poll} />);\n    }\n\n    return items;\n  }\n}\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport PollList from './Poll/PollList';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport extractText from 'flarum/common/utils/extractText';\nimport PollListState from '../states/PollListState';\nimport Button from 'flarum/common/components/Button';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport PollView from './PollView';\nimport { AbstractPollPage } from './AbstractPollPage';\n\nexport default class PollsPage extends AbstractPollPage {\n  oninit(vnode: Mithril.Vnode) {\n    super.oninit(vnode);\n\n    if (!app.forum.attribute<boolean>('globalPollsEnabled')) {\n      m.route.set('/');\n      return;\n    }\n\n    this.state = new PollListState({\n      sort: m.route.param('sort'),\n      filter: m.route.param('filter'),\n    });\n\n    this.state.refresh();\n\n    app.setTitle(extractText(app.translator.trans('fof-polls.forum.page.nav')));\n  }\n\n  view(): Mithril.Children {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    if (this.poll) {\n      return (\n        <div className=\"PollsListPage\">\n          <div className=\"container\">\n            <PollView poll={this.poll} />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"PollsListPage\">\n        {super.hero()}\n        <div className=\"container\">\n          <div className=\"sideNavContainer\">\n            <nav className=\"PollsListPage-nav sideNav\">\n              <ul>{listItems(this.sidebarItems().toArray())}</ul>\n            </nav>\n            <div className=\"PollsPage-results sideNavOffset\">\n              <div className=\"IndexPage-toolbar\">\n                <ul className=\"IndexPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                <ul className=\"IndexPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n              </div>\n              <PollList state={this.state} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    const canStartPoll = app.forum.attribute<boolean>('canStartGlobalPolls');\n\n    items.add(\n      'newGlobalPoll',\n      <Button\n        icon=\"fas fa-edit\"\n        className=\"Button Button--primary App-primaryControl PollsPage-newPoll\"\n        itemClassName=\"App-primaryControl\"\n        onclick={() => {\n          this.newPollAction();\n        }}\n        disabled={!canStartPoll}\n      >\n        {app.translator.trans(`fof-polls.forum.poll.${canStartPoll ? 'start_poll_button' : 'cannot_start_poll_button'}`)}\n      </Button>\n    );\n\n    items.add(\n      'nav',\n      <SelectDropdown\n        buttonClassName=\"Button\"\n        className=\"App-titleControl\"\n        accessibleToggleLabel={app.translator.trans('core.forum.index.toggle_sidenav_dropdown_accessible_label')}\n      >\n        {this.navItems().toArray()}\n      </SelectDropdown>\n    );\n\n    return items;\n  }\n\n  actionItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'refresh',\n      Button.component({\n        title: app.translator.trans('fof-polls.forum.page.refresh_tooltip'),\n        icon: 'fas fa-sync',\n        className: 'Button Button--icon',\n        onclick: () => {\n          this.state.refresh();\n        },\n      })\n    );\n\n    return items;\n  }\n\n  viewItems() {\n    return IndexPage.prototype.viewItems();\n  }\n\n  navItems() {\n    return IndexPage.prototype.navItems();\n  }\n\n  /**\n   * Change to create new poll page\n   */\n  newPollAction(): void {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      return;\n    }\n\n    m.route.set(app.route('fof.polls.compose'));\n  }\n}\n","import app from 'flarum/forum/app';\nimport { IPageAttrs } from 'flarum/common/components/Page';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Mithril from 'mithril';\nimport PollListState from '../states/PollListState';\nimport extractText from 'flarum/common/utils/extractText';\nimport Button from 'flarum/common/components/Button';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport { AbstractPollPage } from './AbstractPollPage';\nimport PollShowcase from './PollShowcase';\n\nexport default class PollsShowcasePage extends AbstractPollPage {\n  oninit(vnode: Mithril.Vnode<IPageAttrs, PollListState>) {\n    super.oninit(vnode);\n\n    if (!app.forum.attribute<boolean>('globalPollsEnabled')) {\n      m.route.set('/');\n      return;\n    }\n\n    this.state = new PollListState({\n      sort: m.route.param('sort'),\n      filter: m.route.param('filter'),\n      include: this.includeParams(),\n    });\n\n    this.state.refresh();\n\n    app.setTitle(extractText(app.translator.trans('fof-polls.forum.page.nav')));\n  }\n\n  includeParams(): string[] {\n    return ['options', 'votes', 'myVotes', 'myVotes.option'];\n  }\n\n  contentItems(): ItemList<Mithril.Children> {\n    const items = super.contentItems();\n\n    if (!this.loading) {\n      items.add('poll-showcase', <PollShowcase state={this.state} />);\n    }\n\n    return items;\n  }\n\n  sidebarItems(): ItemList<Mithril.Children> {\n    const items = super.sidebarItems();\n    const canStartPoll = app.forum.attribute<boolean>('canStartGlobalPolls');\n\n    items.remove('newDiscussion');\n\n    if (canStartPoll) {\n      items.add(\n        'newGlobalPoll',\n        <Button\n          icon=\"fas fa-edit\"\n          className=\"Button Button--primary App-primaryControl PollsPage-newPoll\"\n          itemClassName=\"App-primaryControl\"\n          onclick={() => {\n            this.newPollAction();\n          }}\n          disabled={!canStartPoll}\n        >\n          {app.translator.trans(`fof-polls.forum.poll.${canStartPoll ? 'start_poll_button' : 'cannot_start_poll_button'}`)}\n        </Button>,\n        100\n      );\n    }\n\n    return items;\n  }\n\n  newPollAction(): void {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      return;\n    }\n\n    m.route.set(app.route('fof.polls.compose'));\n  }\n}\n","import app from 'flarum/forum/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport ListVotersModal from './ListVotersModal';\nimport classList from 'flarum/common/utils/classList';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport icon from 'flarum/common/helpers/icon';\nimport EditPollModal from './EditPollModal';\nimport Poll from '../models/Poll';\nimport type Mithril from 'mithril';\nimport PollOption from '../models/PollOption';\nimport Post from 'flarum/common/models/Post';\nimport extractText from 'flarum/common/utils/extractText';\nimport PollImage from './Poll/PollImage';\n\nexport interface PostPollAttrs extends ComponentAttrs {\n  poll: Poll;\n  post?: Post;\n  tooltipVisible?: boolean;\n}\n\nexport default class PostPoll extends Component<PostPollAttrs> {\n  loadingOptions: boolean = false;\n  useSubmitUI!: boolean;\n  pendingSubmit: boolean = false;\n  pendingOptions: any;\n  updateVisibility: () => void = () => {};\n\n  oninit(vnode: Mithril.Vnode<PostPollAttrs, this>) {\n    super.oninit(vnode);\n\n    this.useSubmitUI = !this.attrs.poll?.canChangeVote() && this.attrs.poll?.allowMultipleVotes();\n    this.pendingOptions = null;\n  }\n\n  oncreate(vnode: Mithril.Vnode<PostPollAttrs, this>) {\n    super.oncreate(vnode);\n\n    this.preventClose = this.preventClose.bind(this);\n    window.addEventListener('beforeunload', this.preventClose);\n  }\n\n  onremove(vnode: Mithril.Vnode<PostPollAttrs, this>) {\n    super.onremove(vnode);\n\n    window.removeEventListener('beforeunload', this.preventClose);\n  }\n\n  view() {\n    const poll = this.attrs.poll;\n    const options = poll.options() || [];\n    let maxVotes = poll.allowMultipleVotes() ? poll.maxVotes() : 1;\n\n    if (maxVotes === 0) maxVotes = options.length;\n\n    const infoItems = this.infoItems(maxVotes);\n\n    return (\n      <div className=\"Post-poll\" data-id={poll.id()}>\n        <div className=\"PollHeading\">\n          <div className=\"PollHeading-title-container\">\n            <h3 className=\"PollHeading-title\">{poll.question()}</h3>\n            {poll.subtitle() && <p className=\"helpText PollHeading-subtitle\">{poll.subtitle()}</p>}\n          </div>\n\n          <div className=\"PollHeading-actions\">\n            {poll.canSeeVoters() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.public_poll')}>\n                <Button className=\"Button PollHeading-voters\" onclick={this.showVoters.bind(this)} icon=\"fas fa-poll\" />\n              </Tooltip>\n            )}\n\n            {poll.canEdit() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.moderation.edit')}>\n                <Button className=\"Button PollHeading-edit\" onclick={app.modal.show.bind(app.modal, EditPollModal, { poll })} icon=\"fas fa-pen\" />\n              </Tooltip>\n            )}\n            {poll.canDelete() && (\n              <Tooltip text={app.translator.trans('fof-polls.forum.moderation.delete')}>\n                <Button className=\"Button PollHeading-delete\" onclick={this.deletePoll.bind(this)} icon=\"fas fa-trash\" />\n              </Tooltip>\n            )}\n          </div>\n        </div>\n\n        {!!poll.imageUrl() && <PollImage poll={poll} />}\n\n        <div>\n          <div className=\"PollOptions\">{options.map(this.viewOption.bind(this))}</div>\n\n          <div className=\"Poll-sticky\">\n            {!infoItems.isEmpty() && <div className=\"helpText PollInfoText\">{infoItems.toArray()}</div>}\n\n            {this.useSubmitUI && this.pendingSubmit && (\n              <Button className=\"Button Button--primary Poll-submit\" loading={this.loadingOptions} onclick={this.onsubmit.bind(this)}>\n                {app.translator.trans('fof-polls.forum.poll.submit_button')}\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  infoItems(maxVotes: number) {\n    const items = new ItemList();\n    const poll = this.attrs.poll;\n    const hasVoted = poll.myVotes()?.length > 0;\n\n    if (app.session.user && !poll.canVote() && !poll.hasEnded()) {\n      items.add(\n        'no-permission',\n        <span>\n          <i className=\"icon fas fa-times-circle fa-fw\" />\n          {app.translator.trans('fof-polls.forum.no_permission')}\n        </span>\n      );\n    }\n\n    if (poll.endDate()) {\n      items.add(\n        'end-date',\n        <span>\n          <i class=\"icon fas fa-clock fa-fw\" />\n          {poll.hasEnded()\n            ? app.translator.trans('fof-polls.forum.poll_ended')\n            : app.translator.trans('fof-polls.forum.days_remaining', { time: dayjs(poll.endDate()).fromNow() })}\n        </span>\n      );\n    }\n\n    if (poll.canVote()) {\n      items.add(\n        'max-votes',\n        <span>\n          <i className=\"icon fas fa-poll fa-fw\" />\n          {app.translator.trans('fof-polls.forum.max_votes_allowed', { max: maxVotes })}\n        </span>\n      );\n\n      if (!poll.canChangeVote()) {\n        items.add(\n          'cannot-change-vote',\n          <span>\n            <i className={`icon fas fa-${hasVoted ? 'times' : 'exclamation'}-circle fa-fw`} />\n            {app.translator.trans('fof-polls.forum.poll.cannot_change_vote')}\n          </span>\n        );\n      }\n    }\n\n    return items;\n  }\n\n  viewOption(opt: PollOption) {\n    const poll = this.attrs.poll;\n    const hasVoted = poll.myVotes()?.length > 0;\n    const totalVotes = poll.voteCount();\n\n    const voted = this.pendingOptions ? this.pendingOptions.has(opt.id()) : poll.myVotes()?.some?.((vote) => vote.option() === opt);\n    const votes = opt.voteCount();\n    const percent = totalVotes > 0 ? Math.round((votes / totalVotes) * 100) : 0;\n\n    // isNaN(null) is false, so we have to check type directly now that API always returns the field\n    const canSeeVoteCount = typeof votes === 'number';\n    const isDisabled = this.loadingOptions || (hasVoted && !poll.canChangeVote());\n    const width = canSeeVoteCount ? percent : (Number(voted) / (poll.myVotes()?.length || 1)) * 100;\n\n    const showCheckmark = !app.session.user || (!poll.hasEnded() && poll.canVote() && (!hasVoted || poll.canChangeVote()));\n\n    const bar = (\n      <div className=\"PollBar\" data-selected={!!voted} style={`--poll-option-width: ${width}%`}>\n        {showCheckmark && (\n          <label className=\"PollAnswer-checkbox\">\n            <input onchange={this.changeVote.bind(this, opt)} type=\"checkbox\" checked={voted} disabled={isDisabled} />\n            <span className=\"checkmark\" />\n          </label>\n        )}\n\n        <div className=\"PollAnswer-text\">\n          <span className=\"PollAnswer-text-answer\">{opt.answer()}</span>\n          {voted && !showCheckmark && icon('fas fa-check-circle', { className: 'PollAnswer-check' })}\n          {canSeeVoteCount && <span className={classList('PollPercent', percent !== 100 && 'PollPercent--option')}>{percent}%</span>}\n        </div>\n\n        {opt.imageUrl() ? <img className=\"PollAnswer-image\" src={opt.imageUrl()} alt={opt.answer()} loading=\"lazy\" /> : null}\n      </div>\n    );\n\n    return (\n      <div\n        className={classList('PollOption', hasVoted && 'PollVoted', poll.hasEnded() && 'PollEnded', opt.imageUrl() && 'PollOption-hasImage')}\n        data-id={opt.id()}\n      >\n        {canSeeVoteCount ? (\n          <Tooltip text={app.translator.trans('fof-polls.forum.tooltip.votes', { count: votes })} onremove={this.hideOptionTooltip}>\n            {bar}\n          </Tooltip>\n        ) : (\n          bar\n        )}\n      </div>\n    );\n  }\n\n  changeVote(option: PollOption, evt: Event) {\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      if (evt.target instanceof HTMLInputElement) {\n        evt.target.checked = false;\n      }\n      return;\n    }\n\n    const optionIds = this.pendingOptions || new Set(this.attrs.poll.myVotes().map?.((v) => v.option()?.id()));\n    const isUnvoting = optionIds.delete(option.id());\n    const allowsMultiple = this.attrs.poll.allowMultipleVotes();\n\n    if (!allowsMultiple) {\n      optionIds.clear();\n    }\n\n    if (!isUnvoting) {\n      optionIds.add(option.id());\n    }\n\n    if (this.useSubmitUI) {\n      this.pendingOptions = optionIds.size ? optionIds : null;\n      this.pendingSubmit = !!this.pendingOptions;\n      return;\n    }\n\n    return this.submit(optionIds, null, () => {\n      if (evt.target instanceof HTMLInputElement) {\n        evt.target.checked = isUnvoting;\n      }\n    });\n  }\n\n  onsubmit() {\n    return this.submit(\n      this.pendingOptions,\n      () => {\n        this.pendingOptions = null;\n        this.pendingSubmit = false;\n      },\n      null\n    );\n  }\n\n  async submit(optionIds: Iterable<unknown> | ArrayLike<unknown>, cb: { (): void; (): void } | null, onerror: any) {\n    this.loadingOptions = true;\n    m.redraw();\n\n    try {\n      try {\n        const res = await app.request({\n          method: 'PATCH',\n          url: `${app.forum.attribute<Poll>('apiUrl')}/fof/polls/${this.attrs.poll.id()}/votes`,\n          body: {\n            data: {\n              optionIds: Array.from(optionIds),\n            },\n          },\n        });\n        app.store.pushPayload(res as any);\n        cb?.();\n      } catch (err) {\n        onerror?.(err);\n      }\n    } finally {\n      this.loadingOptions = false;\n\n      m.redraw();\n    }\n  }\n\n  showVoters() {\n    // Load all the votes only when opening the votes list\n    app.modal.show(ListVotersModal, {\n      poll: this.attrs.poll,\n      post: this.attrs.post,\n    });\n  }\n\n  deletePoll() {\n    if (confirm(extractText(app.translator.trans('fof-polls.forum.moderation.delete_confirm')))) {\n      this.attrs.poll.delete().then(() => {\n        m.redraw.sync();\n      });\n    }\n  }\n\n  /**\n   * Attempting to use the `tooltipVisible` attr on the Tooltip component set to 'false' when no vote count\n   * caused the tooltip to break on click. This is a workaround to hide the tooltip when no vote count is available,\n   * called on 'onremove' of the Tooltip component. It doesn't always work as intended either, but it does the job.\n   */\n  hideOptionTooltip(vnode: Mithril.Vnode<PostPollAttrs, this>) {\n    vnode.attrs.tooltipVisible = false;\n    vnode.state.updateVisibility();\n  }\n\n  /**\n   * Alert before navigating away using browser's 'beforeunload' event\n   */\n  preventClose(e: Event) {\n    if (this.pendingOptions) {\n      e.preventDefault();\n      return true;\n    }\n    return undefined;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Button, { IButtonAttrs } from 'flarum/common/components/Button';\nimport classList from 'flarum/common/utils/classList';\nimport Mithril from 'mithril';\nimport Poll from '../models/Poll';\nimport PollOption from '../models/PollOption';\n\nexport interface UploadPollImageButtonAttrs extends IButtonAttrs {\n  className?: string;\n  loading?: boolean;\n  name: string;\n  onclick: () => void;\n  poll?: Poll | null;\n  option?: PollOption | null;\n  onUpload: (fileName: string | null | undefined) => void;\n}\n\nexport interface PollUploadObject {\n  fileUrl: string;\n  fileName: string;\n}\n\nexport default class UploadPollImageButton extends Button<UploadPollImageButtonAttrs> {\n  loading: boolean = false;\n  uploadedImageUrl: string | undefined | false = false;\n  fileName: string | undefined = undefined;\n  $input: JQuery<HTMLElement> | undefined;\n\n  // @ts-expect-error\n  view(vnode: Mithril.Vnode<UploadPollImageButtonAttrs>) {\n    this.attrs.loading = this.loading;\n    this.attrs.className = classList(this.attrs.className, 'Button', 'Button--inverted');\n\n    const imageUrl = this.getImageUrl();\n    const canUpload = app.forum.attribute<boolean>('canUploadPollImages');\n\n    if (imageUrl) {\n      this.attrs.onclick = this.remove.bind(this);\n\n      return (\n        <div>\n          <p>\n            <img src={imageUrl} alt=\"\" />\n          </p>\n          <p>\n            {super.view({\n              ...vnode,\n              children: app.translator.trans('fof-polls.forum.upload_image.remove_button'),\n            })}\n          </p>\n        </div>\n      );\n    } else {\n      this.attrs.onclick = this.upload.bind(this);\n    }\n\n    return canUpload && super.view({ ...vnode, poll: undefined, children: app.translator.trans('fof-polls.forum.upload_image.upload_button') });\n  }\n\n  /**\n   * Prompt the user to upload an image.\n   */\n  upload() {\n    if (this.loading) return;\n\n    this.$input = $('<input type=\"file\">');\n\n    this.$input\n      .appendTo('body')\n      .hide()\n      .trigger('click')\n      .on('change', (e) => {\n        const body = new FormData();\n        // @ts-expect-error\n        body.append(this.attrs.name, $(e.target)[0].files[0]);\n\n        this.loading = true;\n        m.redraw();\n\n        app\n          .request<PollUploadObject>({\n            method: 'POST',\n            url: this.resourceUrl(),\n            serialize: (raw: any) => raw,\n            body,\n          })\n          .then(this.success.bind(this), this.failure.bind(this));\n      });\n  }\n\n  /**\n   * Remove the image.\n   */\n  remove() {\n    this.loading = true;\n    m.redraw();\n\n    let fileName = undefined;\n\n    if (!this.attrs.poll?.exists && !this.attrs.option?.exists) {\n      fileName = this.fileName;\n    }\n\n    app\n      .request<PollUploadObject>({\n        method: 'DELETE',\n        url: this.resourceUrl(fileName),\n      })\n      .then((upload) => {\n        if (this.attrs.poll?.exists) {\n          this.attrs.poll.pushAttributes({ image: null, imageUrl: null, isImageUpload: false });\n        }\n\n        if (this.attrs.option?.exists) {\n          this.attrs.option.pushAttributes({ imageUrl: false });\n        }\n\n        return upload;\n      })\n      .then(this.success.bind(this), this.failure.bind(this));\n  }\n\n  resourceUrl(fileName: string | undefined = undefined) {\n    let url = app.forum.attribute('apiUrl') + '/fof/polls/' + this.attrs.name;\n    const poll = this.attrs.poll;\n    const option = this.attrs.option;\n\n    if (fileName) {\n      url += '/name/' + fileName;\n    } else {\n      if (poll?.exists) url += '/' + poll?.id();\n      if (option?.exists) url += '/' + option?.id();\n    }\n\n    return url;\n  }\n\n  getImageUrl() {\n    if (this.uploadedImageUrl !== false) {\n      return this.uploadedImageUrl;\n    }\n\n    return this.attrs.poll?.imageUrl() || this.attrs.option?.imageUrl();\n  }\n\n  /**\n   * After a successful upload/removal, redraw the page.\n   *\n   * @param {PollUploadObject} response\n   * @protected\n   */\n  success(response: PollUploadObject | null) {\n    this.loading = false;\n    this.uploadedImageUrl = response?.fileUrl;\n    this.fileName = response?.fileName;\n\n    this.attrs.onUpload?.(response?.fileName);\n    m.redraw();\n    this.$input?.remove();\n  }\n\n  /**\n   * If upload/removal fails, stop loading.\n   *\n   * @param {object} response\n   * @protected\n   */\n  failure(response: object) {\n    this.loading = false;\n    m.redraw();\n    this.$input?.remove();\n  }\n}\n","import { NestedStringArray } from '@askvortsov/rich-icu-message-formatter';\n\nexport default class FormError extends Error {\n  constructor(props: NestedStringArray | string) {\n    super(props + '');\n  }\n}\n","import CreatePollModal from './CreatePollModal';\nimport PostPoll from './PostPoll';\nimport EditPollModal from './EditPollModal';\nimport ListVotersModal from './ListVotersModal';\nimport PollForm from './PollForm';\nimport ComposePollHero from './ComposePollHero';\nimport ComposePollPage from './ComposePollPage';\nimport PollsPage from './PollsPage';\nimport PollView from './PollView';\nimport PollViewPage from './PollViewPage';\nimport PollSubmitButton from './Poll/PollSubmitButton';\nimport PollOption from './Poll/PollOption';\nimport PollOptions from './Poll/PollOptions';\nimport PollsShowcasePage from './PollsShowcasePage';\nimport PollShowcase from './PollShowcase';\nimport PollShowcaseItem from './PollShowcaseItem';\nimport { AbstractPollPage } from './AbstractPollPage';\nimport PollTitle from './Poll/PollTitle';\nimport PollSubtitle from './Poll/PollSubtitle';\nimport PollImage from './Poll/PollImage';\nimport PollListItem from './Poll/PollListItem';\nimport PollList from './Poll/PollList';\n\nexport const components = {\n  CreatePollModal,\n  PostPoll,\n  EditPollModal,\n  ListVotersModal,\n  PollForm,\n  ComposePollHero,\n  ComposePollPage,\n  PollsPage,\n  PollView,\n  PollViewPage,\n  PollSubmitButton,\n  PollOption,\n  PollOptions,\n  PollsShowcasePage,\n  PollShowcase,\n  PollShowcaseItem,\n  AbstractPollPage,\n  PollTitle,\n  PollSubtitle,\n  PollImage,\n  PollListItem,\n  PollList,\n};\n","import Extend from 'flarum/common/extenders';\nimport Post from 'flarum/common/models/Post';\nimport Forum from 'flarum/common/models/Forum';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Poll from './models/Poll';\nimport PollOption from './models/PollOption';\nimport PollVote from './models/PollVote';\nimport PollsPage from './components/PollsPage';\nimport ComposePollPage from './components/ComposePollPage';\nimport PollViewPage from './components/PollViewPage';\nimport PollsShowcasePage from './components/PollsShowcasePage';\n\nexport default [\n  new Extend.Routes() //\n    .add('fof.polls.showcase', '/polls', PollsShowcasePage)\n    .add('fof.polls.list', '/polls/all', PollsPage)\n    .add('fof.polls.view', '/polls/view/:id', PollViewPage)\n    .add('fof.polls.compose', '/polls/composer', ComposePollPage),\n\n  new Extend.Store() //\n    .add('polls', Poll)\n    .add('poll_options', PollOption)\n    .add('poll_votes', PollVote),\n\n  new Extend.Model(Post) //\n    .hasMany<Poll>('polls')\n    .attribute<boolean>('canStartPoll'),\n\n  new Extend.Model(Forum) //\n    .attribute<boolean>('canStartPolls'),\n\n  new Extend.Model(Discussion) //\n    .attribute<boolean>('hasPoll')\n    .attribute<boolean>('canStartPoll'),\n];\n","import app from 'flarum/forum/app';\n\nimport addDiscussionBadge from './addDiscussionBadge';\nimport addComposerItems from './addComposerItems';\nimport addPollsToPost from './addPollsToPost';\nimport addPostControls from './addPostControls';\nimport addNavItem from './addNavItem';\n\nexport * from './components';\nexport * from './models';\nexport * from './states';\nexport * from './utils';\n\napp.initializers.add('fof/polls', () => {\n  addDiscussionBadge();\n  addComposerItems();\n  addPollsToPost();\n  addPostControls();\n  addNavItem();\n});\n\nexport { default as extend } from './extend';\n","import Model from 'flarum/common/Model';\nimport PollOption from './PollOption';\nimport PollVote from './PollVote';\nimport computed from 'flarum/common/utils/computed';\n\nexport default class Poll extends Model {\n  public tempOptions: PollOption[] | undefined;\n\n  question() {\n    return Model.attribute<string>('question').call(this);\n  }\n\n  subtitle() {\n    return Model.attribute<string | null>('subtitle').call(this);\n  }\n\n  image() {\n    return Model.attribute<string | null>('image').call(this);\n  }\n\n  imageUrl() {\n    return Model.attribute<string | null>('imageUrl').call(this);\n  }\n\n  imageAlt() {\n    return Model.attribute<string | null>('imageAlt').call(this);\n  }\n\n  isImageUpload() {\n    return Model.attribute<boolean>('isImageUpload').call(this);\n  }\n\n  hasEnded() {\n    return Model.attribute<boolean>('hasEnded').call(this);\n  }\n\n  endDate() {\n    return Model.attribute('endDate', Model.transformDate).call(this);\n  }\n\n  publicPoll() {\n    return Model.attribute<boolean>('publicPoll').call(this);\n  }\n\n  hideVotes() {\n    return Model.attribute<boolean>('hideVotes').call(this);\n  }\n\n  allowChangeVote() {\n    return Model.attribute<boolean>('allowChangeVote').call(this);\n  }\n\n  allowMultipleVotes() {\n    return Model.attribute<boolean>('allowMultipleVotes').call(this);\n  }\n\n  maxVotes() {\n    return Model.attribute<number>('maxVotes').call(this);\n  }\n\n  voteCount() {\n    return Model.attribute<number>('voteCount').call(this);\n  }\n\n  canVote() {\n    return Model.attribute<boolean>('canVote').call(this);\n  }\n\n  canEdit() {\n    return Model.attribute<boolean>('canEdit').call(this);\n  }\n\n  canDelete() {\n    return Model.attribute<boolean>('canDelete').call(this);\n  }\n\n  canSeeVoters() {\n    return Model.attribute<boolean>('canSeeVoters').call(this);\n  }\n\n  canChangeVote() {\n    return Model.attribute<boolean>('canChangeVote').call(this);\n  }\n\n  options() {\n    const options = Model.hasMany<PollOption>('options').call(this);\n    return options ? (options as PollOption[]) : [];\n  }\n\n  votes() {\n    return Model.hasMany<PollVote>('votes').call(this);\n  }\n\n  myVotes(): PollVote[] {\n    const myVotes = Model.hasMany<PollVote>('myVotes').call(this);\n    return myVotes ? (myVotes as PollVote[]) : [];\n  }\n\n  isGlobal() {\n    return Model.attribute<boolean>('isGlobal').call(this);\n  }\n\n  isHidden() {\n    return computed<boolean, this>('hiddenAt', (hiddenAt) => !!hiddenAt).call(this);\n  }\n\n  // TODO: These two don't make sense as of now\n  isUnread() {\n    return false;\n  }\n\n  apiEndpoint() {\n    /** @ts-ignore */\n    return `/fof/polls${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Poll from './Poll';\nimport PollVote from './PollVote';\n\nexport default class PollOption extends Model {\n  answer() {\n    return Model.attribute<string>('answer').call(this);\n  }\n\n  imageUrl() {\n    return Model.attribute<string | null>('imageUrl').call(this);\n  }\n\n  isImageUpload() {\n    return Model.attribute<boolean>('isImageUpload').call(this);\n  }\n\n  voteCount() {\n    return Model.attribute<number>('voteCount').call(this);\n  }\n\n  poll() {\n    return Model.hasOne<Poll>('polls').call(this);\n  }\n\n  votes() {\n    return Model.hasMany<PollVote>('votes').call(this);\n  }\n\n  apiEndpoint() {\n    /** @ts-ignore */\n    return `/fof/polls/answers${this.exists ? `/${this.data.id}` : ''}`;\n  }\n}\n","import Model from 'flarum/common/Model';\nimport Poll from './Poll';\nimport PollOption from './PollOption';\nimport User from 'flarum/common/models/User';\n\nexport default class PollVote extends Model {\n  poll() {\n    return Model.hasOne<Poll>('poll').call(this);\n  }\n\n  option() {\n    const result = Model.hasOne<PollOption>('option').call(this);\n    return result === false ? null : result;\n  }\n\n  user() {\n    return Model.hasOne<User>('user').call(this);\n  }\n\n  pollId() {\n    return Model.attribute<number>('pollId').call(this);\n  }\n\n  optionId() {\n    return Model.attribute<number>('optionId').call(this);\n  }\n\n  apiEndpoint() {\n    return `/fof/polls/${this.pollId()}/vote`;\n  }\n}\n","import Poll from './Poll';\nimport PollOption from './PollOption';\nimport PollVote from './PollVote';\n\nexport const models = {\n  Poll,\n  PollOption,\n  PollVote,\n};\n","import app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport PollOption from '../models/PollOption';\n\nexport default class PollFormState {\n  poll: Poll;\n  loading: boolean;\n  deleting: boolean;\n  expandedGroup: string;\n\n  static createNewPoll() {\n    const poll = app.store.createRecord<Poll>('polls');\n\n    poll.pushAttributes({\n      question: '',\n      endDate: '',\n      publicPoll: false,\n      allowMultipleVotes: false,\n      hideVotes: false,\n      allowChangeVote: false,\n      maxVotes: 0,\n    });\n\n    poll.tempOptions = [app.store.createRecord<PollOption>('poll_options'), app.store.createRecord<PollOption>('poll_options')];\n\n    return poll;\n  }\n\n  constructor(poll: Poll) {\n    if (!poll) {\n      poll = PollFormState.createNewPoll();\n    }\n\n    this.loading = false;\n    this.deleting = false;\n    this.poll = poll;\n    this.expandedGroup = 'setup';\n  }\n\n  isExpanded(groupKey: string) {\n    return this.expandedGroup === groupKey;\n  }\n\n  expand(groupKey: string) {\n    this.expandedGroup = groupKey;\n    m.redraw();\n  }\n\n  async save(data: any) {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      this.poll = await this.poll.save(data);\n      /**\n       * Cleanup attributes:\n       * For the saving process, we add the options directly to the attributes.\n       * As we currently cannot add new PollOptions as relationships.\n       */\n      delete this.poll!.data!.attributes!.options;\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n\n  async delete() {\n    this.loading = true;\n    m.redraw();\n\n    try {\n      await this.poll.delete();\n      this.deleting = true;\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n}\n","import app from 'flarum/forum/app';\nimport PaginatedListState, { Page, PaginatedListParams, PaginatedListRequestParams } from 'flarum/common/states/PaginatedListState';\nimport Poll from '../models/Poll';\nimport { ApiResponsePlural } from 'flarum/common/Store';\nimport EventEmitter from 'flarum/common/utils/EventEmitter';\n\nexport interface PollListParams extends PaginatedListParams {\n  sort?: string;\n}\n\nconst globalEventEmitter = new EventEmitter();\n\nexport default class PollListState<P extends PollListParams = PollListParams> extends PaginatedListState<Poll, P> {\n  protected extraPolls: Poll[] = [];\n  protected eventEmitter: EventEmitter;\n\n  constructor(params: P, page: number = 1) {\n    super(params, page, 20);\n\n    this.eventEmitter = globalEventEmitter.on('poll.deleted', this.deletePoll.bind(this));\n  }\n\n  get type(): string {\n    return 'fof/polls';\n  }\n\n  requestParams(): PaginatedListRequestParams {\n    const params = {\n      include: this.requestIncludes(),\n      filter: this.params.filter || {},\n      sort: this.sortMap()[this.params.sort ?? ''],\n    };\n\n    if (this.params.q) {\n      params.filter.q = this.params.q;\n    }\n\n    return params;\n  }\n\n  includes(): string[] {\n    return ['options', 'votes'];\n  }\n\n  private requestIncludes(): string {\n    const standard = this.includes();\n\n    // merge the standard includes with the custom includes\n    const merged = [...standard, ...(this.params.include || [])];\n\n    // return as a comma separated string\n    return merged.join(',');\n  }\n\n  protected loadPage(page: number = 1): Promise<ApiResponsePlural<Poll>> {\n    const preloadedPolls = app.preloadedApiDocument<Poll[]>();\n\n    if (preloadedPolls) {\n      this.initialLoading = false;\n\n      return Promise.resolve(preloadedPolls);\n    }\n\n    return super.loadPage(page);\n  }\n\n  clear(): void {\n    super.clear();\n\n    this.extraPolls = [];\n  }\n\n  /**\n   * Get a map of sort keys (which appear in the URL, and are used for\n   * translation) to the API sort value that they represent.\n   */\n  sortMap() {\n    const map: any = {};\n\n    if (this.params.q) {\n      map.relevance = '';\n    }\n    map.newest = '-createdAt';\n    map.oldest = 'createdAt';\n\n    return map;\n  }\n\n  /**\n   * In the last request, has the user searched for a poll?\n   */\n  isSearchResults(): boolean {\n    return !!this.params.q;\n  }\n\n  removePoll(poll: Poll): void {\n    this.eventEmitter.emit('poll.deleted', poll);\n  }\n\n  deletePoll(poll: Poll): void {\n    for (const page of this.pages) {\n      const index = page.items.indexOf(poll);\n\n      if (index !== -1) {\n        page.items.splice(index, 1);\n        break;\n      }\n    }\n\n    const index = this.extraPolls.indexOf(poll);\n\n    if (index !== -1) {\n      this.extraPolls.splice(index);\n    }\n\n    m.redraw();\n  }\n\n  /**\n   * Add a poll to the top of the list.\n   */\n  addPoll(poll: Poll): void {\n    this.removePoll(poll);\n    this.extraPolls.unshift(poll);\n\n    m.redraw();\n  }\n\n  protected getAllItems(): Poll[] {\n    return this.extraPolls.concat(super.getAllItems());\n  }\n\n  public getPages(): Page<Poll>[] {\n    const pages = super.getPages();\n\n    if (this.extraPolls.length) {\n      return [\n        {\n          number: -1,\n          items: this.extraPolls,\n        },\n        ...pages,\n      ];\n    }\n\n    return pages;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport LogInModal from 'flarum/forum/components/LogInModal';\nimport PollOption from '../models/PollOption';\nimport PollVote from '../models/PollVote';\nimport ListVotersModal from '../components/ListVotersModal';\nimport { ApiPayloadSingle } from 'flarum/common/Store';\n\nexport default class PollState {\n  public poll: Poll;\n  protected pendingSubmit: boolean = false;\n  protected pendingOptions: Set<string> | null = null;\n  public loadingOptions: boolean = false;\n  public useSubmitUI: boolean;\n  public showCheckMarks: boolean;\n  public canSeeVoteCount: boolean;\n\n  constructor(poll: Poll) {\n    this.poll = poll;\n    this.useSubmitUI = !poll?.canChangeVote() && poll?.allowMultipleVotes();\n    this.showCheckMarks = !app.session.user || (!poll.hasEnded() && poll.canVote() && (!this.hasVoted() || poll.canChangeVote()));\n    this.canSeeVoteCount = typeof poll.voteCount() === 'number';\n    this.init();\n  }\n\n  /**\n   * used as en extendable entry point for init customizations\n   */\n  init(): void {}\n\n  isShowResult(): boolean {\n    return this.poll.hasEnded() || (this.canSeeVoteCount && !!app.session.user && this.hasVoted());\n  }\n\n  hasVoted(): boolean {\n    return this.poll.myVotes().length > 0;\n  }\n\n  overallVoteCount(): number {\n    return this.poll.voteCount();\n  }\n\n  hasVotedFor(option: PollOption): boolean {\n    return this.pendingOptions ? this.pendingOptions.has(option.id()!) : this.poll.myVotes().some((vote: PollVote) => vote.option() === option);\n  }\n\n  getMaxVotes(): number {\n    const poll = this.poll;\n    let maxVotes = poll.allowMultipleVotes() ? poll.maxVotes() : 1;\n    if (maxVotes === 0) maxVotes = poll.options().length;\n    return maxVotes;\n  }\n\n  showButton(): boolean {\n    return this.useSubmitUI && this.pendingSubmit;\n  }\n\n  changeVote(option: PollOption, evt: Event): void {\n    const target = evt.target as HTMLInputElement;\n\n    if (!app.session.user) {\n      app.modal.show(LogInModal);\n      target.checked = false;\n      return;\n    }\n\n    const optionIds = this.pendingOptions || new Set(this.poll.myVotes().map((v: PollVote) => v.option()!.id()!));\n    const isUnvoting = optionIds.delete(option.id()!);\n    const allowsMultiple = this.poll.allowMultipleVotes();\n\n    if (!allowsMultiple) {\n      optionIds.clear();\n    }\n\n    if (!isUnvoting) {\n      optionIds.add(option.id()!);\n    }\n\n    this.pendingOptions = optionIds.size ? optionIds : null;\n    this.pendingSubmit = !!this.pendingOptions;\n\n    if (this.useSubmitUI) {\n      this.pendingOptions = optionIds.size ? optionIds : null;\n      this.pendingSubmit = !!this.pendingOptions;\n      m.redraw();\n      return;\n    }\n\n    this.submit(optionIds, null, () => (target.checked = isUnvoting));\n  }\n\n  hasSelectedOptions(): boolean {\n    return this.pendingSubmit;\n  }\n\n  onsubmit(): Promise<void> {\n    return this.submit(this.pendingOptions!, () => {\n      this.pendingOptions = null;\n      this.pendingSubmit = false;\n    });\n  }\n\n  submit(optionIds: Set<string>, cb: Function | null, onerror: Function | null = null) {\n    this.loadingOptions = true;\n    m.redraw();\n\n    return app\n      .request<ApiPayloadSingle>({\n        method: 'PATCH',\n        url: `${app.forum.attribute('apiUrl')}/fof/polls/${this.poll.id()}/votes`,\n        body: {\n          data: {\n            optionIds: Array.from(optionIds),\n          },\n        },\n      })\n      .then((res: ApiPayloadSingle) => {\n        app.store.pushPayload(res);\n        cb?.();\n      })\n      .catch((err) => {\n        onerror?.(err);\n      })\n      .finally(() => {\n        this.loadingOptions = false;\n        this.canSeeVoteCount = typeof this.poll.voteCount() === 'number';\n        m.redraw();\n      });\n  }\n\n  showVoters = () => {\n    // Load all the votes only when opening the votes list\n    app.modal.show(ListVotersModal, {\n      poll: this.poll,\n    });\n  };\n}\n","import PollFormState from './PollFormState';\nimport PollListState from './PollListState';\nimport PollState from './PollState';\n\nexport const states = {\n  PollFormState,\n  PollListState,\n  PollState,\n};\n","import type Mithril from 'mithril';\nimport app from 'flarum/forum/app';\nimport Poll from '../models/Poll';\nimport Component from 'flarum/common/Component';\nimport ComposePollPage from '../components/ComposePollPage';\nimport PollsPage from '../components/PollsPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Separator from 'flarum/common/components/Separator';\nimport Button from 'flarum/common/components/Button';\n\n/**\n * The `UserControls` utility constructs a list of buttons for a user which\n * perform actions on it.\n */\nexport default {\n  /**\n   * Get a list of controls for a user.\n   */\n  controls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    const sections: ('poll' | 'moderation' | 'destructive')[] = ['poll', 'moderation', 'destructive'];\n    sections.forEach((section) => {\n      const controls = (this[`${section}Controls`](poll, context) as ItemList<Mithril.Children>).toArray();\n      if (controls.length) {\n        controls.forEach((item) => items.add(item.itemName, item));\n        items.add(section + 'Separator', <Separator />);\n      }\n    });\n\n    return items;\n  },\n\n  /**\n   * Get controls for direct modifcation actions on polls (e.g. vote, view voters).\n   */\n  pollControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    return items;\n  },\n\n  /**\n   * Get controls for a user pertaining to moderation (e.g. suspend, edit).\n   */\n  moderationControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (poll.canEdit()) {\n      items.add(\n        'edit',\n        <Button icon=\"fas fa-pencil-alt\" onclick={this.editAction.bind(this, poll)}>\n          {app.translator.trans(`fof-polls.forum.poll_controls.edit_label`)}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Get controls for a user which are destructive (e.g. delete).\n   * @protected\n   */\n  destructiveControls(poll: Poll, context: Component): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    if (poll.canDelete()) {\n      items.add(\n        'delete',\n        <Button icon=\"far fa-trash-alt\" onclick={this.deleteAction.bind(this, poll)}>\n          {app.translator.trans(`fof-polls.forum.poll_controls.delete_label`)}\n        </Button>\n      );\n    }\n\n    return items;\n  },\n\n  /**\n   * Delete the poll.\n   */\n  async deleteAction(poll: Poll): Promise<void> {\n    if (!confirm(app.translator.trans(`fof-polls.forum.poll_controls.delete_confirmation`) as string)) {\n      return;\n    }\n\n    return poll\n      .delete()\n      .then(() => {\n        this.showDeletionAlert(poll, 'success');\n        if (app.current.matches(ComposePollPage, { id: poll.id() }) || app.current.matches(PollsPage, { id: poll.id() })) {\n          app.history.back();\n        } else {\n          window.location.reload();\n        }\n      })\n      .catch(() => this.showDeletionAlert(poll, 'error'));\n  },\n\n  /**\n   * Show deletion alert of poll\n   */\n  showDeletionAlert(poll: Poll, type: string): void {\n    const message = {\n      success: `fof-polls.forum.poll_controls.delete_success_message`,\n      error: `fof-polls.forum.poll_controls.delete_error_message`,\n    }[type]!;\n\n    app.alerts.show({ type }, app.translator.trans(message, { poll: poll }));\n  },\n\n  /**\n   * Edit the poll.\n   */\n  editAction(poll: Poll): void {\n    m.route.set(app.route('fof.polls.compose', { id: poll.id() }));\n  },\n};\n","import PollControls from './PollControls';\n\nexport const utils = {\n  PollControls,\n};\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Badge'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Dropdown'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/components/Placeholder'];","module.exports = flarum.core.compat['common/components/SelectDropdown'];","module.exports = flarum.core.compat['common/components/Separator'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/extenders'];","module.exports = flarum.core.compat['common/helpers/avatar'];","module.exports = flarum.core.compat['common/helpers/highlight'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['common/helpers/username'];","module.exports = flarum.core.compat['common/models/Discussion'];","module.exports = flarum.core.compat['common/models/Forum'];","module.exports = flarum.core.compat['common/models/Post'];","module.exports = flarum.core.compat['common/states/PaginatedListState'];","module.exports = flarum.core.compat['common/utils/EventEmitter'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/RequestError'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/SubtreeRetainer'];","module.exports = flarum.core.compat['common/utils/abbreviateNumber'];","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = flarum.core.compat['common/utils/computed'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['common/utils/string'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/DiscussionComposer'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['forum/components/DiscussionPage'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['forum/components/LogInModal'];","module.exports = flarum.core.compat['forum/components/ReplyComposer'];","module.exports = flarum.core.compat['forum/utils/PostControls'];","module.exports = flarum.core.compat['forum/utils/slidable'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["_OverloadYield","e","d","v","k","module","exports","__esModule","asyncGeneratorStep","n","t","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","default","isNativeReflectConstruct","setPrototypeOf","_construct","Reflect","construct","push","p","bind","prototype","toPropertyKey","_defineProperties","length","enumerable","configurable","writable","Object","defineProperty","key","_createClass","_extends","assign","hasOwnProperty","call","_getPrototypeOf","getPrototypeOf","__proto__","_inheritsLoose","create","constructor","_isNativeFunction","Function","toString","indexOf","_isNativeReflectConstruct","Boolean","valueOf","_readOnlyError","TypeError","_setPrototypeOf","_typeof","toPrimitive","Symbol","String","Number","iterator","isNativeFunction","_wrapNativeSuper","Map","has","get","set","Wrapper","regeneratorDefine","require","_regenerator","toStringTag","Generator","f","y","G","l","GeneratorFunction","GeneratorFunctionPrototype","displayName","w","m","regeneratorAsyncGen","_regeneratorAsync","next","regenerator","regeneratorAsyncIterator","_regeneratorAsyncGen","OverloadYield","AsyncIterator","asyncIterator","_regeneratorDefine","_invoke","_regeneratorKeys","unshift","pop","regeneratorAsync","regeneratorKeys","regeneratorValues","_regeneratorRuntime","name","stop","_catch","abrupt","delegateYield","resultName","finish","_t","prev","sent","wrap","reverse","isGeneratorFunction","mark","awrap","async","keys","values","_regeneratorValues","isNaN","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","app","extend","classList","DiscussionComposer","ReplyComposer","CreatePollModal","toPoll","data","poll","store","createRecord","tempOptions","options","map","option","pollOption","pushAttributes","addToComposer","composer","addPoll","_this","modal","show","fields","onsubmit","items","_this$composer$body","_ref","discussion","body","attrs","console","log","canStartPoll","canRename","forum","canStartPolls","add","className","onclick","translator","trans","Badge","DiscussionList","Discussion","params","include","badges","hasPoll","component","type","label","icon","IndexPage","LinkButton","addNavItem","attribute","href","route","showAllGlobalPolls","CommentPost","DiscussionPage","PostPoll","content","post","isHidden","revealContent","polls","_iterator","_createForOfIteratorHelperLoose","_step","subtree","check","checks","_poll$data","_poll$options$map","_poll$options","_poll$myVotes$map","_poll$myVotes","attributes","_option$data","myVotes","vote","_vote$option","id","JSON","stringify","pusher","binding","channels","main","getById","voteCount","changedOptions","optionId","undefined","redraw","unbind","PostControls","Button","createPoll","save","relationships","_post$rawRelationship","rawRelationship","Page","ItemList","LoadingIndicator","listItems","SelectDropdown","IndexPageHero","AbstractPollPage","_Page","_len","args","Array","_key","concat","loading","_proto","view","pageContent","toArray","hero","mainContent","sidebar","contentItems","sidebarItems","setContent","buttonClassName","accessibleToggleLabel","navItems","initializers","remove","toObject","startsWith","Component","ComposePollHero","_Component","oninit","vnode","controlItems","itemClassName","exists","PollForm","PollFormState","ComposePollPage","_this2","bodyClass","editId","param","pollPromise","loadEditingPoll","createNewPoll","_this2$poll","_this2$poll2","canEdit","history","setTitle","_loadEditingPoll","_callee","alreadyLoaded","_context","find","_x","_onsubmit","_callee2","state","isNew","alertAttrs","alertId","_context2","controls","alerts","setTimeout","dismiss","_x2","_x3","Modal","_Modal","title","onFormSubmit","_onFormSubmit","hide","EditPollModal","_CreatePollModal","avatar","username","Link","ListVotersModal","optionContent","opt","votes","filter","optionAnswer","voteContent","answer","user","PollImage","imageUrl","imageAlt","imageItems","_this$imageAlt","src","alt","PollListItem","Placeholder","PollList","getParams","isLoading","isInitialLoading","isLoadingNext","hasNext","loadNext","isEmpty","text","isSearchResults","getPages","pg","SubtreeRetainer","Dropdown","highlight","slidable","abbreviateNumber","PollControls","PollViewPage","highlightRegExp","freshness","time","session","markedAllAsReadAt","getTime","active","elementAttrs","Slidable","window","controlsView","contentView","slidableUnderneathView","menuClassName","isUnread","disabled","markAsRead","mainView","pollQuestion","subtitle","pollSubtitle","infoItems","question","oncreate","slidableInstance","element","$","on","reset","onbeforeupdate","needsRebuild","current","matches","lastVotedNumber","hasEnded","activeView","endDate","dayjs","fromNow","count","Tooltip","PollOption","hasVoted","totalVotes","voted","canSeeVoteCount","percent","Math","round","_this$poll$myVotes","overallVoteCount","hasVotedFor","isDisabled","loadingOptions","canChangeVote","width","bar","style","showCheckMarks","checked","onchange","changeVote","optionDisplayItems","onremove","hideOptionTooltip","tooltipVisible","updateVisibility","PollOptions","pollOptions","forEach","createOptionView","PollSubmitButton","event","pollButtonSubmit","hasSelectedOptions","PollSubtitle","pollSubtitleItems","PollTitle","pollTitleItems","Switch","Stream","extractText","FormError","UploadPollImageButton","RequestError","optionAnswers","optionImageUrls","image","publicPoll","allowMultipleVotes","hideVotes","allowChangeVote","maxVotes","datepickerMinDate","_poll$tempOptions","formatDate","isAfter","_this$state$poll","bidi","hasImage","uploadConditional","isImageUpload","'['","onUpload","pollImageUploadSuccess","placeholder","required","displayOptions","addOption","min","max","isBefore","deleting","canUpload","imgFunc","pollOptionImageUploadSuccess","removeOption","alert","splice","_this3","_this$dateToTimestamp","pollExists","pollImage","dateToTimestamp","preventDefault","message","error","_delete2","deleteAction","delete","date","def","dayjsDate","isValid","format","fileName","index","isUpload","ifCanUpload","uploadButton","imageUrlInput","_this$state$poll2","canUploadNow","PollPageHero","wrapperClasses","classNames","Hero","PollShowcaseItem","PollShowcase","refresh","showcaseItems","endedItems","page","PollView","PollState","slug","preventClose","addEventListener","removeEventListener","showVoters","createMainView","createPollHeader","createPollContent","createPollFooter","createFormItems","getMaxVotes","showButton","questionSlug","canVote","_AbstractPollPage","item","LogInModal","PollListState","PollsPage","sort","viewItems","actionItems","newPollAction","PollsShowcasePage","includeParams","useSubmitUI","pendingSubmit","pendingOptions","_this$attrs$poll","_this$attrs$poll2","canSeeVoters","canDelete","deletePoll","viewOption","_poll$myVotes2","_poll$myVotes3","_poll$myVotes4","some","showCheckmark","evt","_this$attrs$poll$myVo","_this$attrs$poll$myVo2","target","HTMLInputElement","optionIds","Set","_v$option","isUnvoting","allowsMultiple","clear","size","submit","_submit","cb","onerror","res","request","method","url","from","pushPayload","confirm","sync","_Button","uploadedImageUrl","$input","getImageUrl","children","upload","appendTo","trigger","FormData","append","files","resourceUrl","serialize","raw","success","failure","_this$attrs$option","_this3$attrs$poll","_this3$attrs$option","_this$attrs$option2","response","_this$attrs$onUpload","_this$attrs","_this$$input","fileUrl","_this$$input2","_Error","props","Error","components","Extend","Post","Forum","Poll","PollVote","Routes","Store","Model","hasMany","addDiscussionBadge","addComposerItems","addPollsToPost","addPostControls","computed","_Model","transformDate","isGlobal","hiddenAt","apiEndpoint","hasOne","result","pollId","models","expandedGroup","isExpanded","groupKey","expand","_save","PaginatedListState","EventEmitter","globalEventEmitter","_PaginatedListState","extraPolls","eventEmitter","requestParams","_this$params$sort","requestIncludes","sortMap","q","includes","standard","merged","join","loadPage","preloadedPolls","preloadedApiDocument","initialLoading","relevance","newest","oldest","removePoll","emit","pages","getAllItems","number","init","isShowResult","err","states","Separator","context","sections","section","itemName","pollControls","moderationControls","editAction","destructiveControls","showDeletionAlert","back","location","reload","utils"],"sourceRoot":""}